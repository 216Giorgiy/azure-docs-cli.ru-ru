---
title: Заметки о выпуске Azure CLI
description: Узнайте о последних обновлениях в Azure CLI
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 10/23/2018
ms.topic: article
ms.prod: azure
ms.technology: azure-cli
ms.devlang: azure-cli
ms.openlocfilehash: 65e34ab6014c47ae92a6d4bae8cdc30d4a1413dc
ms.sourcegitcommit: aec89531c938781b4724f43b5bb4b878e106a26a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2018
ms.locfileid: "49952491"
---
# <a name="azure-cli-release-notes"></a>Заметки о выпуске Azure CLI

## <a name="october-23-2018"></a>23 октября 2018 г.

Версия 2.0.49

### <a name="core"></a>Core
* Исправлена проблема с аргументом `--ids`, из-за которой аргумент `--subscription` имел приоритет над подпиской, указанной с использованием `--ids`.
* Добавлены явные предупреждения о том, что параметры будут игнорироваться при использовании `--ids`.

### <a name="acr"></a>ACR
* Исправлена ошибка, связанная с шифрованием сборки ACR в Python2.

### <a name="cdn"></a>CDN
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменено стандартное поведение при кешировании строки запроса `cdn endpoint create`. Теперь IgnoreQueryString не является значением по умолчанию. Это значение задает служба.

### <a name="container"></a>Контейнер
* Добавлен тип `Private` в качестве допустимого типа для передачи в --ip-address.
* При настройке подсети для группы контейнеров разрешено использовать только идентификатор подсети.
* Разрешено указывать имя виртуальной сети или идентификатор ресурса для использования виртуальных сетей из разных групп ресурсов.
* Добавлен параметр `--assign-identity`, позволяющий добавить удостоверение MSI для группы контейнеров.
* Добавлен параметр `--scope`, позволяющий создать назначение ролей для удостоверения MSI, назначаемого системой.
* Добавлено предупреждение, которое появляется при создании группы контейнеров с помощью образа без использования длительного процесса.
* Исправлены ошибки, связанные с табличными выходными данными для команд `list` и `show`.

### <a name="cosmosdb"></a>Cosmos DB
* В команду `cosmosdb create` добавлена поддержка параметра `--enable-multiple-write-locations`.

### <a name="interactive"></a>Interactive
* Внесены изменения, которые обеспечивают отображение параметра глобальных подписок в списке параметров.

### <a name="iot-central"></a>IoT Central
* Добавлены параметры для шаблона и отображаемого имени, используемые при создании приложения IoT Central.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалена поддержка номера SKU F1. Вместо него используйте S1.

### <a name="monitor"></a>Мониторинг
* Изменения в `monitor activity-log list`:
  * Добавлена поддержка для вывода списка всех событий на уровне подписки.
  * Добавлен параметр `--offset`, чтобы упростить создание запросов времени.
  * Улучшена проверка для `--start-time` и `--end-time`, что позволяет применять широкий диапазон форматов ISO 8601 и более понятные форматы даты и времени.
  * Добавлен параметр `--namespace` в качестве псевдонима для нерекомендуемого параметра `--resource-provider`.
  * Параметр `--filters` отмечен как нерекомендуемый, так как служба не поддерживает значения, отличные от значений со строгой типизацией.
* Изменения в `monitor metrics list`:
  * Добавлен параметр `--offset`, чтобы упростить создание запросов времени.
  * Улучшена проверка для `--start-time` и `--end-time`, что позволяет применять широкий диапазон форматов ISO 8601 и более понятные форматы даты и времени.
* Улучшена проверка аргументов `--event-hub` и `--event-hub-rule` для `monitor diagnostic-settings create`.

### <a name="network"></a>Сеть
* Для `nic create` добавлены аргументы `--app-gateway-address-pools` и `--gateway-name`, которые позволяют добавить внутренний пул адресов Шлюза приложений для сетевого адаптера.
* Для `nic ip-config create/update` добавлены аргументы `--app-gateway-address-pools` и `--gateway-name`, которые позволяют добавить внутренний пул адресов Шлюза приложений для сетевого адаптера.

### <a name="servicebus"></a>Служебная шина
* В класс MigrationConfigProperties добавлено свойство `migration_state` с доступом только для чтения. Это свойство позволяет получить сведения о текущем состоянии миграции с ценовой категории Служебной шины "Стандартный" на ценовую категорию "Премиум".

### <a name="sql"></a>SQL
* Исправлены `sql failover-group create` и `sql failover-group update` для работы с политикой перехода на другой ресурс вручную.

### <a name="storage"></a>Хранилище
* Исправлен формат выходных данных `az storage cors list`: для всех элементов отображается правильный ключ службы.
* Добавлен параметр `--bypass-immutability-policy`, который позволяет удалить контейнер, блокируемый политикой неизменяемости.

### <a name="vm"></a>ВМ
* Для режима кэширования диска принудительно применяется значение `None` при использовании команды `[vm|vmss] create` для виртуальных машин серии Lv или Lv2.
* Для `vm create` обновлен список поддерживаемых размеров для поддерживаемого сетевого ускорителя.
* Для `disk create` добавлены строго типизированные аргументы, которые позволяют настроить скорость операций ввода-вывода и передачи данных в секунду для дисков SSD ценовой категории "Ультра".

## <a name="october-16-2018"></a>16 октября 2018 г.

Версия 2.0.48

### <a name="vm"></a>ВМ
* Исправлена проблема с пакетом SDK, из-за которой установка Homebrew завершалась ошибкой.

## <a name="october-9-2018"></a>9 октября 2018 г.

Версия 2.0.47

### <a name="core"></a>Core
* Улучшена обработка ошибок типа Bad Request (Недопустимый запрос).

### <a name="acr"></a>ACR
* Добавлена поддержка табличного формата, как в клиенте Helm.

### <a name="acs"></a>ACS
* Добавлен параметр `aks [create|scale] --nodepool-name` для настройки имени пула узлов. Длина имени ограничена 12 символами. Имя по умолчанию — nodepool1. 
* Исправлен возврат к scp при сбое Paramiko.
* Изменена команда `aks create`, которая больше не требует `--aad-tenant-id`.
* Улучшена функция слияния учетных данных Kubernetes при наличии дублированных записей.

### <a name="container"></a>Контейнер
* Изменена команда `functionapp create`, которая теперь поддерживает создание типа для плана потребления Linux с конкретной средой выполнения.
* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлена поддержка для размещения веб-приложений в контейнерах Windows.

### <a name="event-hub"></a>Концентратор событий
* Исправлена команда `eventhub update`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменены команды `list` для обработки ошибок NotFound (404) от ресурсов. Теперь ошибки обрабатываются обычным образом вместо отображения пустого списка.

### <a name="extensions"></a>расширения.
* Исправлена проблема при попытке добавить расширение, которое уже установлено.

### <a name="hdinsight"></a>HDInsight
* Первый выпуск

### <a name="iot"></a>Интернет вещей
* На баннер, отображаемый при первом запуске, добавлена команда для установки расширений.

### <a name="keyvault"></a>Хранилище ключей
* Изменены команды для работы с хранилищем ключей.Теперь они ограничены последним профилем API.

### <a name="network"></a>Сеть
* Исправлена команда `network dns zone create`. Теперь команда выполняется успешно, даже если пользователь настроил расположение по умолчанию. См. № 6052.
* `--remote-vnet-id` не рекомендуется к использованию для `network vnet peering create`.
* Добавлена параметр `--remote-vnet` в команду `network vnet peering create`, который принимает имя или идентификатор.
* Добавлена поддержка нескольких префиксов подсетей в команде `network vnet create` с параметром `--subnet-prefixes`.
* Добавлена поддержка нескольких префиксов подсетей в команде `network vnet subnet [create|update]` с параметром `--address-prefixes`.
* Исправлена ошибка в команде `network application-gateway create`, из-за которой было невозможно создать шлюзы с номером SKU `WAF_v2` или `Standard_v2`.
* Добавлен вспомогательный аргумент `--service-endpoint-policy` в команду `network vnet subnet update`.

### <a name="role"></a>Роль
* Добавлена поддержка для списка владельцев приложения Azure AD в команду `ad app owner`.
* Добавлена поддержка для списка владельцев субъекта-службы Azure AD в команду `ad sp owner`.
* Изменены команды для создания и обновления определений ролей, которые теперь принимают несколько конфигураций разрешений.
* Изменена команда `ad sp create-for-rbac`, чтобы универсальный код ресурса (URI) для домашней страницы всегда начинался с https.

### <a name="service-bus"></a>Служебная шина Azure
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменены команды `list` для обработки ошибок NotFound (404) от ресурсов. Теперь ошибки обрабатываются обычным образом вместо отображения пустого списка.

### <a name="vm"></a>ВМ
* Исправлено пустое поле `accessSas` в `disk grant-access`.
* Изменена команда `vmss create`, которая теперь резервирует достаточно большой диапазон внешних портов для обработки избыточной подготовки.
* Исправлены команды обновления для `sig`.
* Добавлена поддержка `--no-wait` для управления версиями образов в `sig`.
* Изменена команда `vm list-ip-addresses` для отображения зоны доступности общедоступного IP-адреса.
* Изменена команда `[vm|vmss] disk attach`, которая теперь по умолчанию устанавливает для логического номера диска первое доступно значение.

## <a name="september-21-2018"></a>21 сентября 2018 г.

Версия 2.0.46

### <a name="acr"></a>ACR
* Добавлены команды задач ACR.
* Добавлена команда быстрого запуска.
* Группа команд `build-task` не рекомендуется к использованию.
* Добавлена группа команд `helm` для поддержки управления чартами Helm в ACR.
* Добавлена поддержка создания идемпотентных элементов для управляемого реестра.
* Добавлен флаг отсутствия форматирования для отображения журналов сборки.

### <a name="acs"></a>ACS
* Изменена команда `install-connector` для указания главного полного доменного имени в AKS.
* Исправлена ошибка при назначении ролей для идентификатора подсети виртуальной сети, если не указан субъект-служба и пропущен шаг назначения ролей.

### <a name="appservice"></a>AppService

* Добавлена поддержка операций управления веб-заданиями (как непрерывных, так и активируемых).
* Добавлена поддержка свойства fts-state в az webapp config set. Также добавлена поддержка команд az functionapp config set и az functionapp config show.
* Добавлена возможность использования собственного хранилища для веб-приложений.
* Добавлена возможность вывода списка удаленных веб-приложений и их восстановления.

### <a name="batch"></a>Пакетная служба Azure
* Изменена функция добавления задач с помощью `--json-file` для поддержки синтаксиса AddTaskCollectionParameter.
* Обновлена документация в принятом формате `--json-file`.
* Добавлен параметр `--max-tasks-per-node-option` для команды `batch pool create`.
* Изменен режим работы `batch account` на отображение учетной записи, в которую выполнен вход, если не заданы другие параметры.

### <a name="batch-ai"></a>Искусственный интеллект пакетной службы 
* Исправлен сбой при автоматическом создании учетной записи хранения при выполнении команды `batchai cluster create`.

### <a name="cognitive-services"></a>Cognitive Services
* Добавлено средство заполнения для аргументов `--sku`, `--kind` и `--location`.
* Добавлена команда `cognitiveservices account list-usage`.
* Добавлена команда `cognitiveservices account list-kinds`.
* Добавлена команда `cognitiveservices account list`.
* Команда `cognitiveservices list` отмечена как нерекомендуемая.
* Изменен параметр `--name`, который теперь является необязательным для `cognitiveservices account list-skus`.

### <a name="container"></a>Контейнер
* Добавлена возможность перезапуска и остановки выполняющейся группы контейнеров.
* Добавлен параметр `--network-profile` для передачи в сетевой профиль.
* Добавлены параметры `--subnet` и `--vnet_name` для создания групп контейнеров в виртуальной сети.
* Изменены табличные выходные данные для отображения состояния группы контейнеров.

### <a name="datalake"></a>Data Lake
* Добавлены команды для правил виртуальной сети.

### <a name="interactive-shell"></a>Интерактивная оболочка
* Исправлена ошибка в Windows, связанная со сбоем при выполнении команд.
* Исправлена проблема с загрузкой команд в интерактивной оболочке из-за использования нерекомендуемых объектов.

### <a name="iot"></a>Интернет вещей
* Добавлена поддержка маршрутизации Центров Интернета вещей.

### <a name="key-vault"></a>Key Vault
* Исправлена ошибка импорта ключа в Key Vault для ключей RSA.

### <a name="network"></a>Сеть
* Добавлены команды `network public-ip prefix` для поддержки операций с префиксами общедоступных IP-адресов.
* Добавлены команды `network service-endpoint` для поддержки операций с политиками конечной точки службы.
* Добавлены команды `network lb outbound-rule` для поддержки создания правил для исходящего трафика в Load Balancer (цен. категория "Стандартный").
* Добавлен параметр `--public-ip-prefix` для `network lb frontend-ip create/update` для поддержки конфигурации IP внешнего интерфейса с помощью префиксов общедоступных IP-адресов.
* Добавлен параметр `--enable-tcp-reset` для `network lb rule/inbound-nat-rule/inbound-nat-pool create/update`.
* Добавлен параметр `--disable-outbound-snat` для `network lb rule create/update`.
* Добавлена возможность использования `network watcher flow-log show/configure` с классическими группами безопасности сети.
* Добавлена команда `network watcher run-configuration-diagnostic`.
* Исправлена команда `network watcher test-connectivity` и добавлены свойства `--method`, `--valid-status-codes` и `--headers`.
* `network express-route create/update`: добавлен флаг `--allow-global-reach`.
* `network vnet subnet create/update`: добавлена поддержка `--delegation`.
* Добавлена команда `network vnet subnet list-available-delegations`.
* `network traffic-manager profile create/update`: добавлена поддержка `--interval`, `--timeout` и `--max-failures` для конфигурации мониторинга. Не рекомендуются к использованию параметры`--monitor-path`, `--monitor-port` и `--monitor-protocol`, которые следует заменить на `--path`, `--port` и `--protocol`.
* `network lb frontend-ip create/update`: исправлена логика указания метода распределения частных IP-адресов. Если назначается частный IP-адрес, он назначается статически. Если частный IP-адрес не назначается или строка с данными о частных IP-адресах не заполнена, происходит динамическое распределение.
* `dns record-set * create/update`: добавлена поддержка `--target-resource`.
* Добавлены команды `network interface-endpoint` для обращения к объектам конечных точек интерфейса.
* Добавлено `network profile show/list/delete` для частичного управления сетевыми профилями.
* Добавлено `network express-route peering connection` для управления пиринговыми подключениями через ExpressRoute.

### <a name="rdbms"></a>Реляционная СУБД
* Добавлена поддержка MariaDB.

### <a name="reservation"></a>резервирование.
* База данных CosmosDB добавлена в тип перечисления зарезервированных ресурсов.
* Добавлено свойство имени в модели Patch.

### <a name="manage-app"></a>Управление приложением
* Исправлена ошибка в `managedapp create --kind MarketPlace`, приводившая к аварийному завершению создания экземпляра управляемого приложения Marketplace.
* Изменены команды`feature`, действие которых теперь ограничено поддерживаемыми профилями.

### <a name="role"></a>Роль
* Добавлена функция перечисления членства пользователя в группах.

### <a name="signalr"></a>SignalR
* Первый выпуск

### <a name="storage"></a>Хранилище
* Добавлен параметр `--auth-mode login` для использования учетных данных пользователя для авторизации в больших двоичных объектах и очереди.
* Добавлена команда `storage container immutability-policy/legal-hold` для управления неизменяемым хранилищем.

### <a name="vm"></a>ВМ
* Исправлена ошибка, при которой команда `vm create --generate-ssh-keys` перезаписывала файл закрытого ключа, если отсутствовал файл открытого ключа (#4725, #6780).
* Добавлена поддержка общей коллекции изображений с помощью команды `az sig`.

## <a name="august-28-2018"></a>28 августа 2018 г.

Версия 2.0.45

### <a name="core"></a>Core

* Исправлена проблема с загрузкой пустого файла конфигурации.
* Добавлена поддержка профиля `2018-03-01-hybrid` для Azure Stack.

### <a name="acr"></a>ACR

* Добавлено решение для операций среды выполнения без запросов ARM.
* Внесено изменение для исключения файлов управления версиями (например, файлов с расширениями .git, .gitignore) из отправляемого файла с расширением .tar по умолчанию для команды `build`.

### <a name="acs"></a>ACS

* Внесено изменение в `aks create` с заменой параметрами по умолчанию для виртуальных машин `Standard_DS2_v2`.
* Внесено изменение в `aks get-credentials` для вызова новых API и получения учетных данных кластера.

### <a name="appservice"></a>AppService

* Добавлена поддержка CORS в приложениях-функциях и веб-приложениях.
* Добавлена поддержка тегов ARM для команды создания.
* Внесено изменение в `[webapp|functionapp] identity show` для выхода с кодом 3 при отсутствующем ресурсе.

### <a name="backup"></a>Azure Backup

* Внесено изменение в `backup vault backup-properties show` для выхода с кодом 3 при отсутствующем ресурсе.

### <a name="bot-service"></a>Служба Bot Service

* Начальный выпуск CLI для службы Azure Bot

### <a name="cognitive-services"></a>Cognitive Services

* Добавлен новый параметр `--api-properties,`, требуемый для создания некоторых служб.

### <a name="iot"></a>Интернет вещей

* Исправлена проблема со связыванием связанных центров.

### <a name="monitor"></a>Мониторинг

* Добавлены команды `monitor metrics alert` для создания оповещений метрик почти в реальном времени.
* Команды `monitor alert` не рекомендуются к использованию.

### <a name="network"></a>Сеть

* Внесено изменение в `network application-gateway ssl-policy predefined show` для выхода с кодом 3 при отсутствующем ресурсе.

### <a name="resource"></a>Ресурс

* Внесено изменение в `provider operation show` для выхода с кодом 3 при отсутствующем ресурсе.

### <a name="storage"></a>Хранилище

* Внесено изменение в `storage share policy show` для выхода с кодом 3 при отсутствующем ресурсе.

### <a name="vm"></a>ВМ

* Внесено изменение в `vm/vmss identity show` для выхода с кодом 3 при отсутствующем ресурсе. 
* `--storage-caching` не рекомендуется к использованию для `vm create`.

## <a name="auguest-14-2018"></a>14 августа 2018 г.

Версия 2.0.44

### <a name="core"></a>Core

* Исправлено отображение чисел в выходных данных `table`.
* Добавлен формат выходных данных YAML.

### <a name="telemetry"></a>Телеметрия

* Улучшены функции отчетности телеметрии.

### <a name="acr"></a>ACR

* Добавлены команды `content-trust policy`.
* Исправлена проблема с правильной обработкой `.dockerignore`.

### <a name="acs"></a>ACS

* Внесено изменение в `az acs/aks install-cli` для установки в разделе `%USERPROFILE%\.azure-kubectl` в Windows.
* Внесено изменение в `az aks install-connector` для определения RBAC в кластере и правильной настройки соединителя ACI.
* Внесено изменение в назначение ролей для подсети в соответствующем случае.
* Внесен новый параметр пропуска назначения ролей для подсети в соответствующем случае.                                 
* Внесено изменение в параметр пропуска назначения ролей для подсети, если назначение уже существует.                

### <a name="appservice"></a>AppService

* Исправлена ошибка с созданием приложения-функции с помощью учетных записей хранения во внешних группах ресурсов.
* Исправлен сбой при развертывании ZIP-архива.

### <a name="batchai"></a>Batch AI

* Внесены изменения в выходные данные средства ведения журнала для автоматического создания учетной записи хранения и определения *группы ресурсов*.        

### <a name="container"></a>Контейнер

* Добавлено `--secure-environment-variables` для передачи переменных среды в контейнер.      

### <a name="iot"></a>Интернет вещей

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалены устаревшие команды, которые были перемещены в расширение Интернета вещей.
* Обновлены элементы для игнорирования домена `azure-devices.net`.

### <a name="iot-central"></a>IoT Central

* Начальный выпуск модуля IoT Central

### <a name="keyvault"></a>Хранилище ключей


* Добавлены команды для управления учетными записями хранения и определений SAS.
* Добавлены команды для правил сети.                                                           
* Добавлен параметр `--id` для операций с секретами, ключами и сертификатами.
* Добавлена поддержка версии с несколькими API управления хранилищем ключей.
* Добавлена поддержка версии с несколькими API плоскости данных хранилища ключей.

### <a name="relay"></a>Передача

* Первый выпуск

### <a name="sql"></a>SQL

* Добавлены команды `sql failover-group`.

### <a name="storage"></a>Хранилище

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Внесено изменение в `storage account show-usage` для запроса параметра `--location` и отображения по регионам.
* Внесено изменение в параметр `--resource-group` для команд `storage account`, который теперь необязателен.
* Удалены предупреждения о нарушении необходимого условия для отдельных сбоев в командах пакетной службы для одного сообщения.
* Внесено изменение в команды `[blob|file] delete-batch`, которые больше не выводят выходной массив значений NULL.
* Внесено изменение в команды `blob [download|upload|delete-batch]`, которые теперь считывают маркер SAS из URL-адреса контейнера.

### <a name="vm"></a>ВМ

* Добавлены общие фильтры для `vm list-skus` для удобства использования.

## <a name="july-31-2018"></a>31 июля 2018 г.

Версия 2.0.43

### <a name="acr"></a>ACR

* В команду `acr build-task show` добавлен флаг `--with-secure-properties`.
* Добавлена команда `acr build-task update-build`.

### <a name="acs"></a>ACS

* При завершении команды `az aks browse` нажатием клавиш CTRL + C теперь возвращается значение 0 (успешное завершение).

### <a name="batch"></a>Пакетная служба Azure

* Исправлена ошибка при отображении маркера AAD в CloudShell.

### <a name="container"></a>Контейнер

* Удалено требование указания `--log-analytics-workspace-key` для имени или идентификатора при выборе подписки.

### <a name="network"></a>Сеть

* В профиль 2017-03-09-profile для Azure Stack добавлена поддержка DNS. 

### <a name="resource"></a>Ресурс

* В `group deployment create` добавлен параметр `--rollback-on-error` для выполнения достоверно корректного развертывания в случае возникновения ошибки.
* Исправлена проблема, из-за которой использование `--parameters {}` с `group deployment create` приводило к ошибке.

### <a name="role"></a>Роль

* Добавлена поддержка профиля 2017-03-09-profile для Azure Stack.
* Исправлена проблема, из-за которой универсальные параметры обновления `app update` работали неправильно.

### <a name="search"></a>поиска

* Добавлены команды для службы "Поиск Azure".

### <a name="service-bus"></a>Служебная шина Azure

* Добавлена группа команд migration для переноса пространства имен из служебной шины ценовой категории "Стандартный" в служебную шину ценовой категории "Премиум".
* Добавлены новые необязательные свойства для очереди и подписки служебной шины:
  *  `--enable-batched-operations` и `--enable-dead-lettering-on-message-expiration` в `queue`;
  *  `--dead-letter-on-filter-exceptions` в `subscriptions`.

### <a name="storage"></a>Хранилище

* Добавлена поддержка скачивания больших файлов с помощью одного подключения.
* Преобразованы команды `show`, которые ранее отсутствовали: теперь в случае отсутствия ресурса не возвращается код завершения 3.

### <a name="vm"></a>ВМ

* Добавлена поддержка вывода списка групп доступности по подпискам.
* Добавлена поддержка параметра `StandardSSD_LRS`.
* Добавлена поддержка групп безопасности приложений при создании масштабируемого набора виртуальных машин.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменены `[vm|vmss] create`, `[vm|vmss] identity assign` и `[vm|vmss] identity remove` для вывода пользовательских удостоверений в формате словаря.

## <a name="july-18-2018"></a>18 июля 2018 г.

Версия 2.0.42

### <a name="core"></a>Core

* Добавлена поддержка входа в окно WSL bash из браузера.
* Добавлен флаг `--force-string` для всех универсальных команд обновления.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменены команды show: сообщения об ошибках записываются в журнал, а команды возвращают код выхода 3, если ресурс отсутствует.

### <a name="acr"></a>ACR

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Параметр --no-push в команде acr build сделан обычным флагом.
* В группу `acr repository` добавлены команды `show` и `update`.
* Добавлен флаг `--detail` для `show-manifests` и `show-tags`, позволяющий выводить более подробные сведения.
* Добавлен параметр `--image`, позволяющий получать сведения о сборке или журналы для определенного образа.

### <a name="acs"></a>ACS

* Поведение `az aks create` изменено так, чтобы выдавалась ошибка, если `--max-pods` меньше 5.

### <a name="appservice"></a>AppService

* Добавлена поддержка номеров SKU для PremiumV2.

### <a name="batch"></a>Пакетная служба Azure

* Исправлена ошибка при использовании учетных данных токена в режиме Cloud Shell.
* Регистр во входных данных JSON теперь не учитывается.

### <a name="batch-ai"></a>Искусственный интеллект пакетной службы

* Исправлена команда `az batchai job exec`.

### <a name="container"></a>Контейнер

* Удалено требование указывать имя пользователя и пароль для реестров, не связанных с dockerhub.
* Исправлена ошибка, возникающая при создании групп контейнеров из файла YAML.

### <a name="network"></a>Сеть

* В команду `network nic [create|update|delete]` добавлена поддержка параметра `--no-wait`. 
* Добавлена команда `network nic wait`.
* Аргумент `--ids` команды `network vnet [subnet|peering] list` объявлен устаревшим.
* Добавлен флаг `--include-default`, позволяющий включать в выходные данные команды `network nsg rule list` стандартные правила безопасности.  

### <a name="resource"></a>Ресурс

* В команду `group deployment delete` добавлена поддержка параметра `--no-wait`.
* В команду `deployment delete` добавлена поддержка параметра `--no-wait`.
* Добавлена команда `deployment wait`.
* Исправлена проблема, когда для профиля 2017-03-09-profile по ошибке отображались команды `az deployment` для работы с подписками.

### <a name="sql"></a>SQL

* Исправлена ошибка "The provided resource group name ... did not match the name in the Url" (Указанное имя группы ресурсов ... не соответствовало имени в URL-адресе), которая возникала при указании имени эластичного пула для команд `sql db copy` и `sql db replica create`.
* Разрешена настройка сервера SQL Server по умолчанию с помощью команды `az configure --defaults sql-server=<name>`.
* Реализованы модули форматирования таблиц для команд `sql server`, `sql server firewall-rule`, `sql list-usages` и `sql show-usage`.

### <a name="storage"></a>Хранилище

* В выходные данные команды `storage blob show` добавлено свойство `pageRanges`, которое будет заполняться для страничных BLOB-объектов.

### <a name="vm"></a>ВМ

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] По умолчанию команда `vmss create` теперь использует `Standard_DS1_v2` как размер экземпляра по умолчанию.
* Добавлена поддержка параметра `--no-wait` для `vm extension [set|delete]` и `vmss extension [set|delete]`.
* Добавлена команда `vm extension wait`.

## <a name="july-3-2018"></a>3 июля 2018 г.

Версия 2.0.41

### <a name="aks"></a>AKS

* Теперь для мониторинга используется идентификатор подписки.

## <a name="july-3-2018"></a>3 июля 2018 г.

Версия 2.0.40

### <a name="core"></a>Core

* Добавлен новый поток кода авторизации для интерактивного входа.

### <a name="acr"></a>ACR

* Добавлено состояние сборки опроса.
* Добавлена поддержка значений перечисления без учета регистра.
* Добавлены параметры `--top` и `--orderby` для `show-manifests`.

### <a name="acs"></a>ACS

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Управление доступом на основе ролей Kubernetes включено по умолчанию.
* Добавлен аргумент `--disable-rbac`. Аргумент `--enable-rbac` не рекомендуется использовать, так как теперь это значение по умолчанию.
* Обновлены параметры команды `aks browse`. Добавлена поддержка параметра `--listen-port`.
* Обновлен пакет диаграмм Helm по умолчанию для команды `aks install-connector`. Используйте файл virtual-kubelet-for-aks-latest.tgz.
* Для обновления существующего кластера добавлены команды `aks enable-addons` и `aks disable-addons`.

### <a name="appservice"></a>AppService

* Добавлена поддержка отключения удостоверения с помощью команды `webapp identity remove`.
* Удален тег `preview` для функции идентификации.

### <a name="backup"></a>Azure Backup

* Обновлено определение модуля.

### <a name="batchai"></a>Batch AI

* Исправлены табличные выходные данные для команд `batchai cluster node list` и `batchai job node list`.

### <a name="cloud"></a>Облако

* В облачную конфигурацию добавлен суффикс сервера `acr login`.

### <a name="container"></a>Контейнер

* Для команды `container create` действие по умолчанию изменено на длительную операцию.
* Добавлены параметры Log Analytics `--log-analytics-workspace` и `--log-analytics-workspace-key`.
* Добавлен параметр `--protocol`, с помощью которого можно указать сетевой протокол для использования.

### <a name="extension"></a>Добавочный номер

* Изменена команда `extension list-available`. Теперь с ее помощью отображаются только расширения, совместимые с текущей версией CLI.

### <a name="network"></a>Сеть

* Исправлена проблема с зависимостью типов записей от регистра ([#6602](https://github.com/Azure/azure-cli/issues/6602)).

### <a name="rdbms"></a>Rdbms

* Добавлены команды `[postgres|myql] server vnet-rule`.

### <a name="resource"></a>Ресурс

* Добавлена новая группа операций `deployment`.

### <a name="vm"></a>ВМ

* Добавлена поддержка удаления удостоверения, назначенного системой.

## <a name="june-25-2018"></a>25 июня 2018 г.

Версия 2.0.39

### <a name="cli"></a>Интерфейс командной строки

* В установщике MSI обновлена обрезка файлов, чтобы устранить проблему с установкой расширений.

## <a name="june-19-2018"></a>19 июня 2018 г.

Версия 2.0.38

### <a name="core"></a>Core

* Добавлена глобальная поддержка параметра `--subscription` в большинстве команд.

### <a name="acr"></a>ACR

* Добавлена зависимость `azure-storage-blob`.
* Изменена конфигурация ЦП по умолчанию с `acr build-task create`: теперь используется 2 ядра.

### <a name="acs"></a>ACS

* Обновлены параметры команды `aks use-dev-spaces`. Добавлена поддержка параметра `--update`.
* Изменена команда `aks get-credentials --admin`, чтобы не заменять контекст пользователя в `$HOME/.kube/config`.
* В управляемых кластерах предоставляется доступное только для чтения свойство `nodeResourceGroup`.
* Исправлена ошибка в команде `acs browse`.
* Параметр `--connector-name` стал необязательным для `aks install-connector`, `aks upgrade-connector` и `aks remove-connector`.
* Добавлены новые регионы экземпляров контейнеров Azure для `aks install-connector`.
* В имя выпуска и имя узла Helm добавлено нормализованное расположение для `aks install-connector`.

### <a name="appservice"></a>AppService

* Добавлена поддержка новых версий urllib.
* Добавлена поддержка `functionapp create`, что позволяет использовать план службы приложений из внешних групп ресурсов.

### <a name="batch"></a>Пакетная служба Azure

* Удалена зависимость `azure-batch-extensions`.

### <a name="batch-ai"></a>Искусственный интеллект пакетной службы

* Добавлена поддержка рабочих областей. Рабочие области позволяют объединять кластеры, файловые серверы и эксперименты в группы без ограничений по количеству созданных ресурсов.
* Добавлена поддержка экспериментов. Эксперименты позволяют объединять задания в коллекции без ограничений по количеству созданных заданий.
* Добавлена поддержка настройки `/dev/shm` для заданий, выполняющихся в контейнере Docker.
* Добавлены команды `batchai cluster node exec` и `batchai job node exec`. Эти команды позволяют выполнять любые команды непосредственно на узлах и предоставляют функциональные возможности для перенаправления портов.
* Добавлена поддержка параметра `--ids` в командах `batchai`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Все кластеры и файловые серверы необходимо создавать в рабочих областях.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Задания необходимо создавать в рамках экспериментов.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `--nfs-resource-group` из команд `cluster create` и `job create`. Для подключения NFS из другой рабочей области или группы ресурсов следует указать идентификатор ARM файлового сервера с помощью параметра `--nfs`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `--cluster-resource-group` из команды `job create`. Для отправки задания в кластере, относящемся к другой рабочей области или группе ресурсов, следует указать идентификатор ARM кластера с помощью параметра `--cluster`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален атрибут `location` для заданий, кластера и файловых серверов. Расположение теперь указывается как атрибут рабочей области.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `--location` из команд `job create`, `cluster create` и `file-server create`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменены имена коротких параметров, чтобы обеспечить согласованность интерфейса:
  - [`--config`, `-c`] переименовано в [`--config-file`, `-f`];
  - [`--cluster`, `-r`] переименовано в [`--cluster`, `-c`];
  - [`--cluster`, `-n`] переименовано в [`--cluster`, `-c`];
  - [`--job`, `-n`] переименовано в [`--job`, `-j`].

### <a name="maps"></a>Карты

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Внесены изменения в `maps account create`. Теперь необходимо принимать условия использования — либо с помощью интерактивной командной строки, либо с помощью флага `--accept-tos`.

### <a name="network"></a>Сеть

* Добавлена поддержка `https` для `network lb probe create`. [#6571](https://github.com/Azure/azure-cli/issues/6571).
* Исправлена проблема, из-за которой в параметре `--endpoint-status` учитывался регистр. [#6502](https://github.com/Azure/azure-cli/issues/6502)

### <a name="reservations"></a>Резервирование

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Добавлен обязательный параметр `ReservedResourceType` для команды `reservations catalog show`.
* Добавлен параметр `Location` для команды `reservations catalog show`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `kind` из команды `ReservationProperties`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Параметр `capabilities` в команде `Catalog` переименован в `sku_properties`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалены свойства `size` и `tier` из команды `Catalog`.
* Добавлен параметр `InstanceFlexibility` для команды `reservations reservation update`.

### <a name="role"></a>Роль

* Улучшена обработка ошибок.

### <a name="sql"></a>SQL

* Исправлена вносившая путаницу ошибка, которая возникала при выполнении команды `az sql db list-editions` для расположения, недоступного для указанной подписки.

### <a name="storage"></a>Хранилище

* Выходные данные таблицы для `storage blob download` изменены на более удобочитаемые.

### <a name="vm"></a>ВМ

* Улучшено уточнение размера виртуальной машины для поддержки ускоренной сети в `vm create`.
* Для `vmss create` добавлено предупреждение о том, что стандартный размер виртуальной машины будет изменен с `Standard_D1_v2` на `Standard_DS1_v2`.
* Добавлен параметр `--force-update` для команды `[vm|vmss] extension set`, что позволяет обновлять расширение, даже если конфигурация не изменялась.

## <a name="june-13-2018"></a>13 июня 2018 г.

Версия 2.0.37

### <a name="core"></a>Core

* Улучшена интерактивная телеметрия.

## <a name="june-13-2018"></a>13 июня 2018 г.

Версия 2.0.36

### <a name="aks"></a>AKS

* В `aks create` добавлены дополнительные сетевые параметры.
* В `aks create` добавлены аргументы для наблюдения и маршрутизации HTTP-трафика.
* Добавлен аргумент `--no-ssh-key` для команды `aks create`
* Добавлен аргумент `--enable-rbac` для команды `aks create`
* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] В `aks create` добавлена поддержка аутентификации Azure Active Directory.

### <a name="appservice"></a>AppService

* Устранена проблема с несовместимыми версиями urllib.

## <a name="june-5-2018"></a>5 июня 2018 г.

Версия 2.0.35

### <a name="interactive"></a>Interactive

* Добавлены ограничения в зависимости интерактивного режима.

## <a name="june-5-2018"></a>5 июня 2018 г.

Версия 2.0.34

### <a name="core"></a>Core

* Добавлена поддержка перекрестных ссылок на ресурсы клиента.
* Улучшена надежность при передаче данных телеметрии.

### <a name="acr"></a>ACR

* Добавлена поддержка VSTS в качестве расположения удаленного источника.
* Добавлена команда `acr import`.

### <a name="aks"></a>AKS

* Изменена команда `aks get-credentials` для создания файла конфигурации kube с более надежными разрешениями файловой системы.

### <a name="batch"></a>Пакетная служба Azure

* Исправлена ошибка, связанная с форматированием таблиц при выполнении команды pool list. [[Ошибка #4378](https://github.com/Azure/azure-cli/issues/4378)]

### <a name="iot"></a>Интернет вещей

* Добавлена возможность создания Центров Интернета вещей категории "Базовый".

### <a name="network"></a>Сеть

* Улучшена команда `network vnet peering`.

### <a name="policy-insights"></a>Policy Insights

* Первый выпуск

### <a name="arm"></a>ARM

* Добавлены команды `account management-group`.

### <a name="sql"></a>SQL

* Добавлены новые команды для управляемого экземпляра:
  * `sql mi create`
  * `sql mi show`
  * `sql mi list`
  * `sql mi update`
  * `sql mi delete`
* Добавлены новые команды для управляемой базы данных:
  * `sql midb create`
  * `sql midb show`
  * `sql midb list`
  * `sql midb restore`
  * `sql midb delete`

### <a name="storage"></a>Хранилище

* Добавлены типы MIME для JSON и JavaScript, выводимые из расширений файлов.

### <a name="vm"></a>ВМ

* Изменена команда `vm list-skus` для использования фиксированных столбцов, а также добавлено предупреждение об удалении `Tier` и `Size`.
* Добавлен параметр `--accelerated-networking` для команды `vm create`.
* Добавлен параметр `--tags` для команды `identity create`.

## <a name="may-22-2018"></a>22 мая 2018 г.

Версия 2.0.33

### <a name="core"></a>Core

* Добавлена возможность включения символа `@` в имена файлов.

### <a name="acs"></a>ACS

* Добавлены новые команды для Dev Spaces: `aks use-dev-spaces` и `aks remove-dev-spaces`.
* Исправлена опечатка в справочном сообщении.

### <a name="appservice"></a>AppService

* Улучшены команды общего обновления.
* Добавлена поддержка асинхронного выполнения для `webapp deployment source config-zip`.

### <a name="container"></a>Контейнер

* Добавлена возможность экспорта группы контейнеров в формате YAML.
* Добавлена возможность использования файла YAML для создания или обновления группы контейнеров.

### <a name="extension"></a>Добавочный номер

* Улучшена операция удаления расширений.

### <a name="interactive"></a>Interactive

* Изменены параметры ведения журнала для отключения средства синтаксического анализа для завершенных операций.
* Улучшена обработка поврежденных кэшей справки.

### <a name="keyvault"></a>Хранилище ключей

* Исправлены команды хранилища ключей для работы с удостоверениями в Cloud Shell или виртуальных машинах.

### <a name="network"></a>Сеть

* Исправлена проблема, при которой `network watcher show-topology` не будет выполняться, если виртуальной сети или подсети присвоить имя. [#6326](https://github.com/Azure/azure-cli/issues/6326)
* Исправлена проблема, при которой некоторые команды `network watcher` выдают ошибку, что Наблюдатель за сетями не включен в определенных регионах. [#6264](https://github.com/Azure/azure-cli/issues/6264)

### <a name="sql"></a>SQL

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменены объекты ответа, возвращаемые в результатах команд `db` и `dw`:
    * Свойство `serviceLevelObjective` переименовано на `currentServiceObjectiveName`.
    * Удалены свойства `currentServiceObjectiveId` и `requestedServiceObjectiveId`.
    * Тип свойства `maxSizeBytes` изменен со строкового на целое число.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Теперь следующие свойства `db` и `dw` доступны только для чтения:
    * `requestedServiceObjectiveName`.  Для обновления используйте параметр `--service-objective` или задайте свойство `sku.name`.
    * `edition`. Для обновления используйте параметр `--edition` или задайте свойство `sku.tier`.
    * `elasticPoolName`. Для обновления используйте параметр `--elastic-pool` или задайте свойство `elasticPoolId`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Теперь следующие свойства `elastic-pool` доступны только для чтения:
    * `edition`. Для обновления используйте параметр `--edition`.
    * `dtu`. Для обновления используйте параметр `--capacity`.
    *  `databaseDtuMin`. Для обновления используйте параметр `--db-min-capacity`.
    *  `databaseDtuMax`. Для обновления используйте параметр `--db-max-capacity`.
* Добавлены параметры `--family` и `--capacity` для команд `db`, `dw` и `elastic-pool`.
* Добавлены модули форматирования таблиц для команд `db`, `dw` и `elastic-pool`.

### <a name="storage"></a>Хранилище

* Добавлено средство заполнения для аргумента `--account-name`.
* Устранена проблема, связанная с командой `storage entity query`.

### <a name="vm"></a>ВМ

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `--write-accelerator` из команды `vm create`. Такие же возможности предоставляет команда `vm update` или `vm disk attach`.
* Устранена проблема с сопоставлением образов расширения в команде `[vm|vmss] extension`.
* Добавлен параметр `--boot-diagnostics-storage` для команды `vm create` для записи журнала загрузки.
* Добавлен параметр `--license-type` для команды `[vm|vmss] update`.

## <a name="may-7-2018"></a>7 мая 2018 г.

Версия 2.0.32

### <a name="core"></a>Core

* Исправлено необработанное исключение при получении секретов из основной учетной записи службы с сертификатом.
* Добавлена ограниченная поддержка для позиционных аргументов.
* Исправлена проблема, когда `--query` нельзя использовать с `--ids`. [#5591](https://github.com/Azure/azure-cli/issues/5591)
* Улучшены сценарии конвейерной передачи от команд при использовании `--ids`. Добавлена поддержка `-o tsv` с указанием запроса или `-o json` без указания запроса.
* Добавлена команда предложения в случае ошибки, если пользователи вводят команды с опечаткой.
* Исправлена ошибка, когда пользователи вводят `az ''`.
* Добавлена поддержка настраиваемого ресурса для командных модулей и расширений.

### <a name="acr"></a>ACR

* Добавлены команды сборки ACR.
* Исправлена ошибка о не найденных сообщениях об ошибках.
* Оптимизированы производительность создания ресурсов и обработка ошибок.
* Улучшены возможности входа ACR в нестандартные консоли и WSL.
* Улучшены сообщения об ошибках команд репозитория.
* Обновлены столбцы таблиц и порядок их расположения.

### <a name="acs"></a>ACS

* Добавлено предупреждение о том, что `az aks` — это предварительная версия службы.
* Исправлена проблема с разрешением в `aks install-connector`, когда `--aci-resource-group` не указывается.

### <a name="ams"></a>AMS

* Первоначальный выпуск. Управление ресурсами Служб мультимедиа Azure.

### <a name="appservice"></a>Служба приложений

* Исправлена ошибка в `webapp delete`, когда `--slot` предоставляется.
* Удалено `--runtime-version` из `webapp auth update`.
* Добавлена поддержка min\_tls\_version и https2.0.
* Добавлена поддержка нескольких контейнеров.

### <a name="batch-ai"></a>Искусственный интеллект пакетной службы

* Изменено `batchai create cluster` с учетом приоритета виртуальной машины при настройке в файле конфигурации кластера.

### <a name="cognitive-services"></a>Cognitive Services

* Исправлена опечатка в примере для `cognitiveservices account create` [#5603](https://github.com/Azure/azure-cli/issues/5603).

### <a name="consumption"></a>Потребление

* Добавлены новые команды в API для управления бюджетом.

### <a name="container"></a>Контейнер

* Удалено требование `--registry-server` для `container create`, когда сервер реестра включен в имя образа.

### <a name="cosmos-db"></a>База данных Cosmos

* Добавлена поддержка VNET для Azure CLI в Cosmos DB

### <a name="dms"></a>DMS

* Исходный выпуск. Добавлена поддержка сценария миграции SQL — Azure SQL.

### <a name="extension"></a>Добавочный номер

* Исправлена ошибка, когда метаданные остановленного расширения отображались.

### <a name="interactive"></a>Interactive

* Разрешена работа интерактивных средств завершения с позиционными аргументами.
* Добавлены более понятные выходные данные, когда пользователи вводят \'.
* Исправлены завершения для параметров без справки.
* Исправлены описания для групп команд.

### <a name="lab"></a>Лаборатория

* Исправлены регрессии из преобразования Knack.

### <a name="network"></a>Сеть

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `--ids` для:
  * `express-route auth list`
  * `express-route peering list`
  * `nic ip-config list`
  * `nsg rule list`
  * `route-filter rule list`
  * `route-table route list`
  * `traffic-manager endpoint list`

### <a name="profile"></a>Профиль

* Исправлено определение источника `disk create`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалено `--msi-port` и `--identity-port`, так как они больше не используются.
* Исправлена опечатка в кратком описании `account get-access-token`.

### <a name="redis"></a>Redis

* Вместо `redis patch-schedule patch-schedule show` теперь используется `redis patch-schedule show`.
* `redis list-all` теперь не используется. Эта функция включена в `redis list`.
* Вместо `redis import-method` теперь используется `redis import`.
* Добавлена поддержка `--ids` для разных команд.

### <a name="role"></a>Роль

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалено `ad sp reset-credentials` по причине устаревания.

### <a name="storage"></a>Хранилище

* Разрешено применение SAS-токенов назначения к источнику для копирования BLOB-объектов, если SAS источника и ключ учетной записи не указаны.
* Добавлено отображение времени ожидания сокета для отправки и скачивания большого двоичного объекта.
* Добавлена обработка имен больших двоичных объектов, которые начинаются с разделителей пути, как относительных путей.
* Разрешено использовать `storage blob copy --source-sas` с начальным символом запроса "?".
* Исправлено `storage entity query --marker` для принятия списка пар "ключ-значение".

### <a name="vm"></a>ВМ

* Исправлена недопустимая логика обнаружения в URI неуправляемого BLOB-объекта.
* Добавлена поддержка шифрования диска без предоставления пользователем субъектов-служб.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Не используйте ManagedIdentityExtension виртуальной машины для включения поддержки MSI.
* Добавлена поддержка политики вытеснения для `vmss`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалено `--ids` из:
  * `vm extension list`
  * `vm secret list`
  * `vm unmanaged-disk list`
  * `vmss nic list`
* Добавлена поддержка ускорителя записи.
* Добавлена команда `vmss perform-maintenance`.
* Исправлено `vm diagnostics set` для надежного определения типа ОС виртуальной машины.
* Изменено `vm resize` для проверки того, отличается ли запрошенный размер от установленного (с обновлением только при изменении).


## <a name="april-10-2018"></a>10 апреля 2018 г.

Версия 2.0.31

### <a name="acr"></a>ACR

* Улучшена обработка ошибок при откате wincred.

### <a name="acs"></a>ACS

* Срок действия имен субъектов-служб, созданных службой контейнеров Azure, изменен до 5 лет.

### <a name="appservice"></a>Служба приложений

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.]: Removed `assign-identity`
* Исправлено неперехватываемое исключение для несуществующих планов веб-приложений.

### <a name="batchai"></a>Batch AI

* Добавлена поддержка API 2018-03-01.

  - Подключение на уровне задания.
  - Переменные среды со значениями секретов.
  - Параметры счетчиков производительности
  - Предоставление информации о сегменте пути конкретного задания.
  - Поддержка вложенных папок в API списка файлов.
  - Предоставление информации об использовании и ограничениях.
  - Возможность указать тип кэширования для NFS-серверов.
  - Поддержка пользовательских образов.
  - Добавлена поддержка инструментария pyTorch.

* Добавлена команда `job wait`, позволяющая дождаться завершения задания и сообщить код выхода задания.
* Добавлена команда `usage show`, позволяющая получить актуальные сведения об использовании и ограничениях ресурсов Batch AI для различных регионов.
* Поддержка национальных облаков.
* Для заданий добавлены аргументы командной строки, которые позволяют подключать файловые системы на уровне заданий. Эти же действия можно выполнять в файлах конфигурации.
* Добавлены дополнительные параметры для настройки кластеров: приоритет виртуальной машины, подсеть, исходное число узлов для кластеров с автоматическим масштабированием, выбор пользовательского образа.
* Добавлен параметр командной строки, который позволяет указать тип кэширования для управляемой файловой системы NFS службы Batch AI.
* Упрощена процедура выбора подключаемой файловой системы в файлах конфигурации. Теперь учетные данные для общего файлового ресурса Azure и контейнеров BLOB-объектов Azure указывать не нужно: CLI получит отсутствующие учетные данные с помощью ключа учетной записи хранения, указанного в параметрах командной строки, или переменной среды либо запросит ключ из службы хранилища Azure (если учетная запись хранения относится к текущей подписке).
* Команда задания потоковой передачи файлов теперь автоматически завершается при завершении задания (успешное выполнение, сбой, прерывание или удаление).
* Улучшены выходные данные `table` для операций `show`.
* Добавлен параметр `--use-auto-storage` для создания кластера. Этот параметр упрощает управление учетными записями хранения, а также подключение общего файлового ресурса Azure и контейнеров BLOB-объектов Azure к кластеру.
* Добавлен параметр `--generate-ssh-keys` для команд `cluster create` и `file-server create`.
* Добавлена возможность запустить задачу настройки узла через командную строку.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команды `job stream-file` и `job list-files` перемещены в группу `job file`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] В команде `file-server create` параметр `--admin-user-name` переименован в `--user-name` для согласованности с командой `cluster create`.

### <a name="billing"></a>Выставление счетов

* Добавлены команды для учетной записи регистрации.

### <a name="consumption"></a>Потребление

* Добавлены команды `marketplace`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команда `reservations summaries` переименована в `reservation summary`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команда `reservations details` переименована в `reservation detail`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] В командах `reservation` удалены короткие параметры `--reservation-order-id` и `--reservation-id`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] В командах `reservation summary` удалены короткие параметры `--grain`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] В командах `pricesheet` удалены короткие параметры `--include-meter-details`.

### <a name="container"></a>Контейнер

* Добавлены параметры подключения тома репозитория git: `--gitrepo-url`, `--gitrepo-dir`, `--gitrepo-revision` и `--gitrepo-mount-path`.
* Исправлена ошибка [#5926](https://github.com/Azure/azure-cli/issues/5926): команда `az container exec` возвращает ошибку, когда указан параметр --container-name.

### <a name="extension"></a>Добавочный номер

* Сообщение о проверке распространения перенесено на уровень отладки.

### <a name="interactive"></a>Interactive

* Если команда не распознана, выполнение прерывается.
* Добавлены перехватчики событий, которые используются до и после создания поддерева команд.
* Добавлены сведения о выполнении для параметров `--ids`.

### <a name="network"></a>Сеть

* Исправлена ошибка [#5936](https://github.com/Azure/azure-cli/issues/5936): не задаются теги `application-gateway create`.
* Добавлен аргумент `--auth-certs`, который позволяет подключать сертификаты аутентификации для `application-gateway http-settings [create|update]`. [#4910](https://github.com/Azure/azure-cli/issues/4910).
* Добавлены команды `ddos-protection` для создания планов защиты от атак DDoS.
* В команду `vnet [create|update]` добавлена поддержка `--ddos-protection-plan` для связи виртуальной сети с планом защиты от атак DDoS.
* Исправлена ошибка с флагом `--disable-bgp-route-propagation` в команде `network route-table [create|update]`.
* Удалены фиктивные аргументы `--public-ip-address-type` и `--subnet-type` для команды `network lb [create|update]`.
* В `network dns zone [import|export]` и `network dns record-set txt add-record` добавлена поддержка записей типа TXT с escape-последовательностями RFC 1035.

### <a name="profile"></a>Профиль

* Добавлена поддержка классических учетных записей Azure для команды `account list`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалены аргументы `--msi`  &  `--msi-port`.

### <a name="rdbms"></a>Реляционная СУБД

* Добавлена команда `georestore`.
* Из команды `create` исключено ограничение на размер хранилища.

### <a name="resource"></a>Ресурс

* Добавлена поддержка параметра `--metadata` в команде `policy definition create`.
* Добавлена поддержка `--metadata`, `--set`, `--add` и `--remove` для команды `policy definition update`.

### <a name="sql"></a>SQL

* Добавлены команды `sql elastic-pool op list` и `sql elastic-pool op cancel`.

### <a name="storage"></a>Хранилище

* Улучшены сообщения об ошибках для строк подключения, имеющих неправильный формат.

### <a name="vm"></a>ВМ

* В команде `vmss create` добавлена возможность настроить для платформы количество доменов сбоя.
* Команда `vmss create` теперь по умолчанию использует стандартную балансировку нагрузки для зональных и больших масштабируемых наборов, а также масштабируемых наборов, в которых отключена одна группа размещения.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.]: Removed `vm assign-identity`, `vm remove-identity and `vm format-secret`
* Добавлена поддержка SKU общедоступного IP-адреса для команды `vm create`.
* В команду `vm secret format` добавлены аргументы `--keyvault` и `--resource-group` для тех случаев, когда команда не может разрешить идентификатор хранилища. [#5718](https://github.com/Azure/azure-cli/issues/5718).
* Улучшены сообщения об ошибках для команды `[vm|vmss create]`, когда расположение группы ресурсов не поддерживает зоны.


## <a name="march-27-2018"></a>27 марта 2018 г.

Версия 2.0.30

### <a name="core"></a>Core

* Отображение сообщения для расширений, которые отмечены в справке как предварительная версия.

### <a name="acs"></a>ACS

* Устранена ошибка с проверкой SSL-сертификата для `aks install-cli` в Cloud Shell.

### <a name="appservice"></a>Служба приложений

* Добавлена поддержка только протокола HTTPS для `webapp update`.
* Добавлена поддержка слотов для `az webapp identity [assign|show]` и `az functionapp identity [assign|show]`.

### <a name="backup"></a>Azure Backup

* Добавлена новая команда `az backup protection isenabled-for-vm`. Эта команда используется для проверки резервного копирования виртуальной машины в любое хранилище в подписке.
* Включены идентификаторы объектов Azure для параметров `--resource-group` и `--vault-name` для следующих команд:
  * `backup container show`
  * `backup item set-policy`
  * `backup item show`
  * `backup job show`
  * `backup job stop`
  * `backup job wait`
  * `backup policy delete`
  * `backup policy get-default-for-vm`
  * `backup policy list-associated-items`
  * `backup policy set`
  * `backup policy show`
  * `backup protection backup-now`
  * `backup protection disable`
  * `backup protection enable-for-vm`
  * `backup recoverypoint show`
  * `backup restore files mount-rp`
  * `backup restore files unmount-rp`
  * `backup restore restore-disks`
  * `backup vault delete`
  * `backup vault show`
* Изменены параметры `--name` для поддержки формата вывода команд `backup ... show`.

### <a name="container"></a>Контейнер

* Добавлена команда `container exec`. Выполнение команды в контейнере для выполняющейся группы контейнеров.
* Разрешение выходной таблице создавать и обновлять группу контейнеров.

### <a name="extension"></a>Добавочный номер

* Добавлено сообщение для `extension add`, если расширение доступно в режиме предварительной версии.
* Изменен параметр `extension list-available` для отображения всех данных расширения с использованием `--show-details`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменена команда `extension list-available` для отображения упрощенных данных расширения по умолчанию.

### <a name="interactive"></a>Interactive

* Изменены операции завершения, активируемые сразу после завершения загрузки таблицы команд.
* Исправлена ошибка с использованием параметра `--style`.
* Отсутствующий интерактивный лексический анализатор создается после дампа таблицы команд.
* Улучшена поддержка средства заполнения.

### <a name="lab"></a>Лаборатория

* Исправлены ошибки с командой `create environment`.

### <a name="monitor"></a>Мониторинг

* Добавлена поддержка `--top`, `--orderby` и `--namespace` для `metrics list` [#5785](https://github.com/Azure/azure-cli/issues/5785).
* Исправлена ошибка [#4529](https://github.com/Azure/azure-cli/issues/5785): `metrics list` принимает разделенный пробелами список метрик для извлечения.
* Добавлена поддержка `--namespace` для `metrics list-definitions` [#5785](https://github.com/Azure/azure-cli/issues/5785).

### <a name="network"></a>Сеть

* Добавлена поддержка Частных зон DNS.

### <a name="profile"></a>Профиль

* Добавлено предупреждение для `--identity-port` и `--msi-port` в `login`.

### <a name="rdbms"></a>Реляционная СУБД

* Добавлена общедоступная версия 2017-12-01 бизнес-модели API.

### <a name="resource"></a>Ресурс

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.]: Changed `provider operation [list|show]` to not require `--api-version`

### <a name="role"></a>Роль

* Добавлена поддержка конфигурации требуемого уровня доступа и собственных клиентов для `az ad app create`.
* Изменены команды `rbac`, чтобы возвращать не более 1000 идентификаторов в разрешении объекта.
* Добавлены команды `ad sp credential [reset|list|delete]` для управления учетными данными.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр properties из выходных данных `az role assignment [list|show]`.
* Добавлена поддержка разрешений `dataActions` и `notDataActions` для `role definition`.

### <a name="storage"></a>Хранилище

* Исправлена проблема с отправкой файла размером от 195 до 200 ГБ.
* Исправлена ошибка [#4049](https://github.com/Azure/azure-cli/issues/4049): проблемы, когда при отправке добавочного большого двоичного объекта игнорируются параметры условия.

### <a name="vm"></a>ВМ

* Добавлено предупреждение `vmss create` для предстоящих критически важных изменений для наборов из 100 и более экземпляров.
* Добавлена поддержка устойчивости зон для `vm [snapshot|image]`.
* Изменено представление экземпляра диска для улучшения отчета о состоянии шифрования.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] `vm extension delete` Изменена команда, которая больше не возвращает выходные данные.

## <a name="march-13-2018"></a>13 марта 2018 г.

Версия 2.0.29

### <a name="acr"></a>ACR

* Добавлена поддержка параметра `--image` для `repository delete`.
* Параметры `--manifest` и `--tag` команды `repository delete` отмечены как нерекомендуемые.
* Добавлена команда `repository untag` для удаления тега без удаления данных.

### <a name="acs"></a>ACS

* Добавлена команда `aks upgrade-connector` для обновления существующего соединителя.
* Изменены файлы конфигурации `kubectl`. Теперь используется более разборчивый стиль YAML с разбивкой на блоки.

### <a name="advisor"></a>Помощник

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команда `advisor configuration get` переименована в `advisor configuration list`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команда `advisor configuration set` переименована в `advisor configuration update`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалена команда `advisor recommendation generate`.
* Добавлен параметр `--refresh` для команды `advisor recommendation list`.
* Добавлена команда `advisor recommendation show`.

### <a name="appservice"></a>Служба приложений

* Команда `[webapp|functionapp] assign-identity` отмечена как нерекомендуемая.
* Добавлены команды управляемого удостоверения `webapp identity [assign|show]` и `functionapp identity [assign|show]`.

### <a name="eventhubs"></a>Концентраторы событий

* Первый выпуск

### <a name="extension"></a>Добавочный номер

* Добавлена проверка, позволяющая предупредить пользователя, если используемый дистрибутив отличается от хранящегося в исходном файле пакета, так как это может привести к возникновению ошибок.

### <a name="interactive"></a>Interactive

* Исправлена ошибка [#5625](https://github.com/Azure/azure-cli/issues/5625): теперь записи журнала сохраняются в разных сеансах.
* Исправлена ошибка [#3016](https://github.com/Azure/azure-cli/issues/3016): при использовании области не создавались записи журнала.
* Исправлена ошибка [#5688](https://github.com/Azure/azure-cli/issues/5688): если при загрузке таблицы команд возникало исключение, опережающий ввод не выполнялся.
* Исправлен индикатор хода выполнения для длительных операций.

### <a name="monitor"></a>Мониторинг

* Команды `monitor autoscale-settings` отмечены как нерекомендуемые.
* Добавлены команды `monitor autoscale`.
* Добавлены команды `monitor autoscale profile`.
* Добавлены команды `monitor autoscale rule`.

### <a name="network"></a>Сеть

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удален параметр `--tags` из `route-filter rule create`.
* Удалены некоторые ошибочные значения по умолчанию для следующих команд:
  * `network express-route update`
  * `network nsg rule update`
  * `network public-ip update`
  * `traffic-manager profile update`
  * `network vnet-gateway update`
* Добавлены команды `network watcher connection-monitor`.
* Добавлены параметры `--vnet` и `--subnet` для `network watcher show-topology`.

### <a name="profile"></a>Профиль

* Параметр `--msi` для `az login` отмечен как нерекомендуемый.
* Добавлен параметр `--identity` для `az login`. Он заменяет `--msi`.

### <a name="rdbms"></a>Реляционная СУБД

* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Внесены изменения для использования предварительной версии API 2017-12-01.

### <a name="service-bus"></a>Служебная шина Azure

* Первый выпуск

### <a name="storage"></a>Хранилище

* Исправлена ошибка [#4971](https://github.com/Azure/azure-cli/issues/4971): теперь `storage blob copy` поддерживает другие облака Azure.
* Исправлена ошибка [#5286](https://github.com/Azure/azure-cli/issues/5286): при пакетном выполнении команд `storage blob [delete-batch|download-batch|upload-batch]` больше не отображается сообщение об ошибке в предусловии.

### <a name="vm"></a>ВМ

* В `[vm|vmss] create` добавлена поддержка присоединения неуправляемых дисков данных и настройки кэширования.
* `[vm|vmss] assign-identity` и `[vm|vmss] remove-identity` отмечены как нерекомендуемые.
* Вместо нерекомендуемых команд добавлены команды `vm identity [assign|remove|show]` и `vmss identity [assign|remove|show]`.
* Для приоритета `vmss create` по умолчанию установлено значение None.

## <a name="february-27-2018"></a>27 февраля 2018 г

Версия 2.0.28

### <a name="core"></a>Core

* Исправлена ошибка с установкой Homebrew [#5184](https://github.com/Azure/azure-cli/issues/5184).
* Добавлена поддержка телеметрии расширения с применением пользовательских ключей.
* Добавлена функция ведения журнала HTTP в `--debug`.

### <a name="acs"></a>ACS

* Изменено для использования диаграмм Helm `virtual-kubelet-for-aks` для `aks install-connector` по умолчанию.
* Исправлена ошибка с недостаточными разрешениями субъектов-служб на создание групп контейнеров ACI.
* Добавлены параметры `--aci-container-group`, `--location` и `--image-tag` для `aks install-connector`.
* Удалено уведомление об устаревании из `aks get-versions`.

### <a name="appservice"></a>Служба приложений

* Обновления для новой версии пакета SDK (azure-mgmt-web 0.35.0)
* Исправлена ошибка [#5538](https://github.com/Azure/azure-cli/issues/5538): `Free` указывалось как недопустимый номер SKU.

### <a name="cognitive-services"></a>Cognitive Services

* Обновлено уведомление при создании новой учетной записи Cognitive Services.

### <a name="consumption"></a>Потребление

* Добавлены новые команды для резервирования API прейскуранта.
* Обновлены существующие форматы сведений об использовании и резервировании.

### <a name="container"></a>Контейнер

* Добавлены аргументы `--secrets` и `--secrets-mount-path` в командах `container create` для использования секретов в ACI.

### <a name="network"></a>Сеть

* Исправлена ошибка [#5559](https://github.com/Azure/azure-cli/issues/5559): отсутствующий клиент в `network vnet-gateway vpn-client generate`.

### <a name="resource"></a>Ресурс

* Изменено `group deployment export` для отображения частичного шаблона и ошибок при сбое.

### <a name="role"></a>Роль

* Добавлено `role assignment list-changelogs` для включения аудита ролей субъекта-службы.

### <a name="sql"></a>SQL

* Добавлена поддержка избыточности зон для создания и обновления баз данных и эластичных пулов.

### <a name="storage"></a>Хранилище

* Включено определение пути назначения и префикса для `storage blob [upload-batch|download-batch]`.

### <a name="vm"></a>ВМ

* Добавлена поддержка присоединения и отсоединения дисков на одном экземпляре VMSS.


## <a name="february-13-2018"></a>13 февраля 2018 г.

Версия 2.0.27

### <a name="core"></a>Core

* Изменен способ аутентификации при входе с помощью MSI: применяется ключ при использовании идентификатора подписки и имени.

### <a name="acs"></a>ACS

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Переименовано `aks get-versions` на `aks get-upgrades` для точности.
* Изменено `aks get-versions` для отображения версий Kubernetes, доступных для `aks create`.
* Изменены значения по умолчанию `aks create`, чтобы разрешить серверу выбирать версию Kubernetes.
* Обновлены справочные сообщения, связанные с субъектом-службой и создаваемые AKS.
* Изменены стандартные размеры узла для `aks create` с уровня Standard\_D1\_v2 на уровень Standard\_DS1\_v2.
* Улучшена надежность при поиске панели мониторинга для группы pod для `az aks browse`.
* Исправлена команда `aks get-credentials` для обработки ошибок Юникода при загрузке файлов конфигурации Kubernetes.
* Добавлено сообщение в `az aks install-cli`, чтобы помочь получить `kubectl` в `$PATH`.

### <a name="appservice"></a>Служба приложений

* Исправлена проблема со сбоем `webapp [backup|restore]` из-за пустой ссылки.
* Добавлена поддержка стандартных планов службы приложений с помощью `az configure --defaults appserviceplan=my-asp`.

### <a name="cdn"></a>CDN

* Добавлены команды `cdn custom-domain [enable-https|disable-https]`.

### <a name="container"></a>Контейнер

* Добавлен параметр `--follow` для `az container logs` для журналов потоковой передачи.
* Добавлена команда `container attach`, которая добавляет локальный стандартный поток вывода и поток вывода сообщений об ошибках к контейнеру в группе контейнеров.

### <a name="cosmosdb"></a>Cosmos DB

* Добавлена поддержка настройки параметров.

### <a name="extension"></a>Добавочный номер

* Добавлена поддержка параметра `--pip-proxy` для команд `az extension [add|update]`.
* Добавлена поддержка аргумента `--pip-extra-index-urls` для команд `az extension [add|update]`.

### <a name="feedback"></a>Отзыв

* Добавлены сведения о расширении к данным телеметрии.

### <a name="interactive"></a>Interactive

* Исправлена проблема, когда пользователю предлагалось войти в интерактивном режиме в Cloud Shell.
* Исправлена регрессия с отсутствующей функцией заполнения параметров.

### <a name="iot"></a>Интернет вещей

* Исправлена проблема, когда `iot dps access policy [create|update]` в случае успешного выполнения возвращает сообщение об ошибке "Не найдено".
* Исправлена проблема, когда `iot dps linked-hub [create|update]` в случае успешного выполнения возвращает сообщение об ошибке "Не найдено".
* Добавлена поддержка параметра `--no-wait` для `iot dps access policy [create|update]` и `iot dps linked-hub [create|update]`.
* Изменена команда `iot hub create` для указания числа секций.

### <a name="monitor"></a>Мониторинг

* Исправлена команда `az monitor log-profiles create`.

### <a name="network"></a>Сеть

* Исправлен параметр `--tags` для следующих команд:
  * `network public-ip create`
  * `network lb create`
  * `network local-gateway create`
  * `network nic create`
  * `network vnet-gateway create`
  * `network vpn-connection create`

### <a name="profile"></a>Профиль

* Включена команда `az login` для использования в интерактивном режиме.

### <a name="resource"></a>Ресурс

* Снова добавлена команда `feature show`.

### <a name="role"></a>Роль

* Добавлен аргумент `--available-to-other-tenants` для команды `ad app update`

### <a name="sql"></a>SQL

* Добавлены команды `sql server dns-alias`.
* Добавлена команда `sql db rename`.
* Добавлена поддержка аргумента `--ids` для команд SQL.

### <a name="storage"></a>Хранилище

* Добавлены команды `storage blob service-properties delete-policy` и `storage blob undelete` для включения обратимого удаления.

### <a name="vm"></a>ВМ

* Исправлена ошибка, когда шифрование виртуальной машины инициализировалось не полностью.
* Добавлены выходные данные идентификатора субъекта для включения MSI.
* Фиксированное значение `vm boot-diagnostics get-boot-log`


## <a name="january-31-2018"></a>31 января 2018 г.

Версия 2.0.26

### <a name="core"></a>Core

* Добавлена поддержка получения необработанного маркера в контексте MSI.
* Удалена строка индикатора опроса после завершения LRO при выполнении cmd.exe в Windows.
* Добавлено предупреждение, которое появляется при использовании настроенных по умолчанию параметров, измененных на запись уровня INFO. Используйте `--verbose` для просмотра.
* Добавьте индикатор хода выполнения для ожидания команд.

### <a name="acs"></a>ACS

* Добавлено описание аргумента `--disable-browser`.
* Улучшено заполнение нажатием клавиши TAB для аргументов `--vm-size`.

### <a name="appservice"></a>Служба приложений

* Фиксированное значение `webapp log [tail|download]`
* Удалена проверка `kind` в веб-приложениях и функциях.

### <a name="cdn"></a>CDN

* Устранена проблема с отсутствием клиента для команды `cdn custom-domain create`.

### <a name="cosmosdb"></a>Cosmos DB

* Исправлено описание параметров для политик отработки отказа.

### <a name="interactive"></a>Interactive

* Исправлена проблема, когда заполнение параметров команд больше не выполнялось.

### <a name="network"></a>Сеть

* Добавлена защита `--cert-password` для `application-gateway create`.
* Исправлена проблема с `application-gateway update`, когда команда `--sku` ошибочно применяла значение по умолчанию.
* Добавлена защита `--shared-key` и `--authorization-key` для `vpn-connection create`.
* Устранена проблема с отсутствием клиента для команды `asg create`.
* Добавлен параметр `--file-name / -f` для экспортируемых имен в `dns zone export`.
* Исправлены следующие ошибки для `dns zone export`:
  * Исправлена проблема, когда длинные записи ТХТ неправильно экспортировались.
  * Исправлена проблема, когда записи ТХТ в кавычках неправильно экспортировались без символов экранирования.
* Исправлена проблема, когда некоторые записи импортировались дважды с помощью `dns zone import`.
* Восстановлены команды `vnet-gateway root-cert` и `vnet-gateway revoked-cert`.

### <a name="profile"></a>Профиль

* Исправлена команда `get-access-token` для работы в виртуальной машине с идентификатором.

### <a name="resource"></a>Ресурс

* Исправлена ошибка с `deployment [create|validate]`, когда предупреждение неправильно отображалось, если поле type шаблона содержало значения в верхнем регистре.

### <a name="storage"></a>Хранилище

* Исправлена проблема с переносом учетных записей хранения из версии 1 в версию 2.
* Добавлены отчеты о ходе выполнения всех команд отправки или скачивания.
* Исправлена ошибка, которая препятствовала использованию параметра аргумента -n с `storage account check-name`.
* Добавлен столбец snapshot в табличные выходные данные для `blob [list|show]`.
* Исправлены ошибки с разными параметрами, которые должны были анализироваться как целые числа.

### <a name="vm"></a>ВМ

* Добавлена команда `vm image accept-terms` для разрешения создания виртуальных машин из образов с дополнительными расходами.
* Исправлена команда `[vm|vmss create]` для выполнения команд с прокси-сервера с помощью неподписанных сертификатов.
* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлена поддержка режима низкого приоритета для VMSS.
* Добавлена защита `--admin-password` для `[vm|vmss] create`.


## <a name="january-17-2018"></a>17 января 2018 г.

Версия 2.0.25

### <a name="acr"></a>ACR

* Добавлена возможность отката входа ACR при ошибках учетных данных в Windows.
* Включены журналы реестра.

### <a name="acs"></a>ACS

* Исправлена команда `get-credentials`.
* Удалено требование роли для имени субъекта-службы.

### <a name="appservice"></a>Служба приложений

* Исправлена ошибка с `config ssl upload`, при которой значение `hosting_environment_profile` было NULL.
* В `browse` добавлена поддержка для пользовательских URL-адресов.
* Исправлена поддержка слотов для `log tail`.

### <a name="backup"></a>Azure Backup

* Параметр `--container-name` для `backup item list` теперь не является обязательным.
* В `backup restore restore-disks` добавлены варианты учетной записи хранения.
* Для проверки расположения в `backup protection enable-for-vm` добавлена чувствительность к регистру.
* Устранена проблема, при которой команды завершались сбоем с указанием недопустимого имени контейнера.
* В `backup item list` теперь по умолчанию включен параметр Health Status.

### <a name="batch"></a>Пакетная служба Azure

* `batch login` теперь возвращает сведения об аутентификации.

### <a name="cloud"></a>Облако

* При установке `--profile` в облаке теперь не требуется указывать конечные точки.

### <a name="consumption"></a>Потребление

* Добавлены новые команды для резервирования: `consumption reservations summaries` и `consumption reservations details`.

### <a name="event-grid"></a>Сетка событий Azure

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команды `az eventgrid topic event-subscription` перемещены в `eventgrid event-subscription`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команды `az eventgrid resource event-subscription` перемещены в `eventgrid event-subscription`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Удалена команда `eventgrid event-subscription show-endpoint-url`. Вместо нее следует использовать `eventgrid event-subscription show --include-full-endpoint-url`.
* Добавлена команда `eventgrid topic update`.
* Добавлена команда `eventgrid event-subscription update`.
* Добавлен параметр `--ids` для команд `eventgrid topic`.
* Добавлена поддержка заполнения нажатием клавиши TAB для имен разделов.

### <a name="interactive"></a>Interactive

* Устранена проблема, при которой интерактивный режим не работал с Python 2.x.
* Исправлены ошибки при запуске.
* Устранена проблема, при которой некоторые команды не работали в интерактивном режиме.

### <a name="iot"></a>Интернет вещей

* Добавлена поддержка службы подготовки устройств.
* В команды и справочную информацию о них добавлены сообщения о нерекомендуемых версиях.
* Теперь при проверке Интернета вещей указывается расширение Интернета вещей.

### <a name="monitor"></a>Мониторинг

* Добавлена поддержка параметра нескольких диагностических операций. Теперь параметр `--name` является обязательным для `az monitor diagnostic-settings create`.
* Добавлена команда `monitor diagnostic-settings categories` для получения категории параметров диагностики.

### <a name="network"></a>Сеть

* Устранена проблема с `vnet-gateway update` при попытке входа в активный режим и режим ожидания или выхода из них.
* Для `application-gateway [create|update]` добавлена поддержка HTTP2.

### <a name="profile"></a>Профиль

* Добавлена поддержка для входа с использованием назначенных пользователям удостоверений.

### <a name="role"></a>Роль

* В `role assignment create` добавлен аргумент `--assignee-object-id`, чтобы обойти запрос графов.

### <a name="service-fabric"></a>Service Fabric

* В результат проверки при создании кластера добавлены подробные сведения об ошибках.
* Устранена проблема отсутствия клиента при выполнении некоторых команд.

### <a name="vm"></a>ВМ

* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Поддержка разных зон для `vmss`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Значение по умолчанию `vmss` для одной зоны заменено данными подсистемы балансировки нагрузки уровня "Стандартный".
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Для EMSI параметр `externalIdentities` изменен на `userAssignedIdentities`.
* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлена поддержка переключения дисков ОС.
* Добавлена поддержка использования образов виртуальных машин из других подписок.
* В `[vm|vmss] create` добавлены аргументы `--plan-name`, `--plan-product`, `--plan-promotion-code` и `--plan-publisher`.
* Устранены проблемы с `[vm|vmss] create`.
* Устранена проблема чрезмерного использования ресурсов из-за `vm image list --all`.

## <a name="december-19-2017"></a>19 декабря 2017 г.

Версия 2.0.23

* Добавлена поддержка для входа с использованием назначенных пользователям удостоверений.

### <a name="container"></a>Контейнер

* Исправлен неправильный порядок параметров для журналов контейнеров.

### <a name="network"></a>Сеть

* Добавлен аргумент `--disable-bgp-route-propagation` для команды `route-table [create|update]`
* Добавлен аргумент `--ip-tags` для команды `public-ip [create|update]`

### <a name="storage"></a>Хранилище

* Добавлена поддержка хранилища версии 2.

### <a name="vm"></a>ВМ

* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлена поддержка для назначенных пользователям удостоверений для виртуальных машин и VMSS.


## <a name="december-5-2017"></a>5 декабря 2017 г.

Версия 2.0.22

* Удалена команда `az component`. Вместо нее следует использовать `az extension`.

### <a name="core"></a>Core
* Конечная точка `AZURE_US_GOV_CLOUD` центра AAD изменена с login.microsoftonline.com на login.microsoftonline.us.
* Исправлена проблема с непрерывной отправкой телеметрии.

### <a name="acs"></a>ACS

* Добавлены команды `aks install-connector` и `aks remove-connector`.
* Улучшены сообщения об ошибках для команды `acs create`.
* Добавлена возможность использования команды `aks get-credentials -f` без полного пути.

### <a name="advisor"></a>Помощник

* Первый выпуск

### <a name="appservice"></a>Служба приложений

* Добавлена возможность создания имени сертификата с помощью команды `webapp config ssl upload`.
* Исправлены команды `webapp [list|show]` и `functionapp [list|show]` для отображения правильных приложений.
* Добавлено стандартное значение для переменной `WEBSITE_NODE_DEFAULT_VERSION`.

### <a name="consumption"></a>Потребление

* Добавлена поддержка API версии 2017-11-30.

### <a name="container"></a>Контейнер

* Исправлены стандартные порты регрессии.

### <a name="monitor"></a>Мониторинг

* Добавлена поддержка нескольких измерений для команд метрик.

### <a name="resource"></a>Ресурс

* Добавлен аргумент `--include-response-body` для команды `resource show`

### <a name="role"></a>Роль

* Добавлено отображение стандартных назначений "классических" администраторов для команды `role assignment list`.
* Добавлена поддержка команды `ad sp reset-credentials` для добавления учетных данных вместо перезаписи.
* Улучшены сообщения об ошибках для команды `ad sp create-for-rbac`.

### <a name="sql"></a>SQL

* Добавлены команды `sql db list-usages` и `sql db show-usage`.
* Добавлены команды `sql server conn-policy show` и `sql server conn-policy update`.

### <a name="vm"></a>ВМ

* Добавлены сведения о зонах для команды `az vm list-skus`.


## <a name="november-14-2017"></a>14 ноября 2017 г.

Версия 2.0.21

### <a name="acr"></a>ACR

* Добавлена поддержка создания веб-перехватчиков в регионах репликации.


### <a name="acs"></a>ACS

* В AKS агент теперь называется узлом.
* Параметр `--orchestrator-release` для командлета `acs create` не рекомендуется использовать.
* Изменен размер виртуальной машины для AKS по умолчанию на `Standard_D1_v2`.
* Исправлена команда `az aks browse` для Windows.
* Исправлена команда `az aks get-credentials` для Windows.

### <a name="appservice"></a>Служба приложений

* Добавлен источник развертывания `config-zip` для веб-приложений и приложений-функций.
* Добавлен параметр `--docker-container-logging` для команды `az webapp log config`.
* Удален параметр `storage` из параметра `--web-server-logging` для команды `az webapp log config`.
* Улучшены сообщения об ошибках для команды `deployment user set`.
* Добавлена поддержка создания приложений-функций Linux
* Фиксированное значение `list-locations`

### <a name="batch"></a>Пакетная служба Azure

* Исправлена ошибка в команде создания пула, когда идентификатор ресурса использовался с флагом `--image`.

### <a name="batchai"></a>Модуль искусственного интеллекта пакетной службы

* Добавлен короткий параметр `-s` для параметра `--vm-size` при указании размера виртуальной машины в команде `file-server create`.
* Добавлены аргументы ключа и имени учетной записи хранения в параметры команды `cluster create`.
* Исправлена документация по командам `job list-files` и `job stream-file`.
* Добавлен короткий параметр `-r` для параметра `--cluster-name` при указании имени кластера в команде `job create`.

### <a name="cloud"></a>Облако

* Изменена команда `cloud [register|update]` для предотвращения регистрации облаков, для которых отсутствуют необходимые конечные точки.

### <a name="container"></a>Контейнер

* Добавлена поддержка открытия нескольких портов.
* Добавлена политика перезапуска группы контейнеров.
* Добавлена поддержка подключения файлового ресурса Azure в качестве тома.
* Обновлена вспомогательная документация.

### <a name="data-lake-analytics"></a>Data Lake Analytics

* Изменена команда `[job|account] list` для возврата более кратких сведений.

### <a name="data-lake-store"></a>Data Lake Store

* Изменена команда `account list` для возврата более кратких сведений.

### <a name="extension"></a>Добавочный номер

* Добавлена команда `extension list-available` для отображения официальных расширений Майкрософт.
* Добавлен параметр `--name` для команды `extension [add|update]` для установки расширений по имени.

### <a name="iot"></a>Интернет вещей

* Добавлена поддержка центров сертификации (ЦС) и цепочек сертификатов.

### <a name="monitor"></a>Мониторинг

* Добавлены команды `activity-log alert`.

### <a name="network"></a>Сеть

* Добавлена поддержка DNS-записей типа CAA.
* Исправлена проблема, когда конечные точки могли не обновляться с помощью команды `traffic-manager profile update`.
* Исправлена проблема, когда команда `vnet update --dns-servers` не работала в зависимости от способа создания виртуальной сети.
* Исправлена проблема, когда относительные DNS-имена неправильно импортировались с помощью команды `dns zone import`.

### <a name="reservations"></a>Резервирование

* Первоначальный выпуск предварительной версии

### <a name="resource"></a>Ресурс

* Добавлена поддержка идентификаторов ресурсов для блокировок на уровне ресурсов и параметра `--resource`.

### <a name="sql"></a>SQL

* Добавлен параметр `--ignore-missing-vnet-service-endpoint` для команды `sql server vnet-rule [create|update]`.

### <a name="storage"></a>Хранилище

* Изменена команда `storage account create` для использования номера SKU `Standard_RAGRS` по умолчанию.
* Исправлены ошибки при обработке имени файла или большого двоичного объекта, содержащего символы, отличные от ASCII.
* Исправлена ошибка, препятствующая использованию параметра `--source-uri` с командой `storage [blob|file] copy start-batch`.
* Добавлены команды для удаления нескольких объектов с помощью команды `storage [blob|file] delete-batch`.
* Исправлена проблема с включением метрик с помощью команды `storage metrics update`.
* Исправлена проблема с файлами более 200 ГБ при использовании команды `storage blob upload-batch`.
* Исправлена проблема, когда параметры `--bypass` и `--default-action` игнорировались командой `storage account [create|update]`.

### <a name="vm"></a>ВМ

* Исправлена ошибка с командой `vmss create`, препятствующая использованию уровня `Basic`.
* Добавлены аргументы `--plan` для команды `[vm|vmss] create` для пользовательских образов с информацией о выставлении счетов.
* Добавлены команды `vm secret `[add|remove|list]`.
* Команда `vm format-secret` переименована в `vm secret format`.
* Добавлен аргумент `--encrypt format` для команды `vm encryption enable`

## <a name="october-24-2017"></a>24 октября 2017 г.

Версия 2.0.20

### <a name="core"></a>Core

* Обновление `2017-03-09-profile` для использования API `MGMT_STORAGE` версии `2016-01-01`

### <a name="acr"></a>ACR

* Обновление службы управления ресурсами для указания API версии `2017-10-01`
* Изменение номера SKU BYOS-хранилища на "Классический"
* Переименование номеров SKU реестра на "Базовый", "Стандартный" и "Премиум"

### <a name="acs"></a>ACS

* [ПРЕДВАРИЕТЛЬНАЯ ВЕРСИЯ] Добавление команд `az aks`
* Исправление Kubernetes `get-credentials`

### <a name="appservice"></a>Служба приложений

* Исправление проблемы с недопустимыми скачанными журналами `webapp`

### <a name="component"></a>Компонент

* Добавление более понятного сообщения об устаревании для всех установщиков, а также запроса на подтверждение

### <a name="monitor"></a>Мониторинг

* Добавлены команды `action-group`.

### <a name="resource"></a>Ресурс

* Исправление несовместимости с самой последней версии зависимости msrest в `group export`
* Исправление `policy assignment create` для работы с определениями встроенных политик и наборов политик

### <a name="vm"></a>ВМ

* Добавлен аргумент `--accelerated-networking` для команды `vmss create`


## <a name="october-9-2017"></a>9 октября 2017 г.

Версия 2.0.19

### <a name="core"></a>Core

* В Azure Stack добавлена обработка URL-адресов центра ADFS с завершающей косой чертой.

### <a name="appservice"></a>Служба приложений

* Добавлена возможность общего обновления с помощью новой команды `webapp update`.

### <a name="batch"></a>Пакетная служба Azure

* Обновление до пакета SDK для пакетной службы версии 4.0.0
* Обновлен параметр `--image` для команды VirtualMachineConfiguration, обеспечивающий поддержку ссылок на образы ARM в дополнение к publish:offer:sku:version.
* Добавлена поддержка новой модели расширений CLI для команд расширений пакетной службы.
* Удалена поддержка пакетной службы для модели компонентов.

### <a name="batchai"></a>Модуль искусственного интеллекта пакетной службы

* Исходный выпуск модуля искусственного интеллекта пакетной службы

### <a name="keyvault"></a>Хранилище ключей

* Исправлена проблема с аутентификацией Key Vault при использовании ADFS в Azure Stack. [(#4448)](https://github.com/Azure/azure-cli/issues/4448)

### <a name="network"></a>Сеть

* Аргумент `--server` для `application-gateway address-pool create` изменен на необязательный (разрешено использование пустых пулов адресов).
* Обновлен элемент `traffic-manager` для поддержки последних функций.

### <a name="resource"></a>Ресурс

* Добавлена поддержка параметров `--resource-group/-g` для изменения имени группы ресурсов на `group`.
* Добавлены команды для `account lock` для работы с блокировками на уровне подписки.
* Добавлены команды для `group lock` для работы с блокировками на уровне группы.
* Добавлены команды для `resource lock` для работы с блокировками на уровне ресурса.

### <a name="sql"></a>SQL

* Добавлена поддержка SQL TDE и BYOK TDE.
* Добавлена команда `db list-deleted` и параметр `db restore --deleted-time` для поиска и восстановления удаленных баз данных.
* Добавлено `db op list` и `db op cancel` для отображения и отмены выполняющихся операций в базе данных.

### <a name="storage"></a>Хранилище

* Добавлена поддержка моментальных снимков файловых ресурсов.

### <a name="vm"></a>Виртуальные машины

* Исправлена ошибка в команде `vm show`, когда использование `-d` вызывало сбой отсутствующих частных IP-адресов.
* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлена поддержка последовательного обновления для команды `vmss create`.
* Добавлена поддержка обновления параметров шифрования с помощью команды `vm encryption enable`.
* Добавлен параметр `--os-disk-size-gb` для команды `vm create`.
* Добавлен параметр `--license-type` для команды `vmss create` (для Windows).


## <a name="september-22-2017"></a>22 сентября 2017 г.

Версия 2.0.18

### <a name="resource"></a>Ресурс

* Добавлена поддержка отображения определений встроенных политик
* Добавлена поддержка параметра mode для создания определения политик
* Добавлена поддержка шаблонов и определений пользовательского интерфейса для команды `managedapp definition create`
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Изменен тип ресурса `managedapp` с `appliances` на `applications` и с `applianceDefinitions` на `applicationDefinitions`.

### <a name="network"></a>Сеть

* Добавлена поддержка зоны доступности для подкоманд `network lb` и `network public-ip`
* Добавлена поддержка IPv6 (пиринг Майкрософт) для `express-route`
* Добавлены команды группы безопасности приложения `asg`
* Добавлен аргумент `--application-security-groups` для команды `nic [create|ip-config create|ip-config update]`
* Добавлены аргументы `--source-asgs` и `--destination-asgs` для команды `nsg rule [create|update]`
* Добавлены аргументы `--ddos-protection` и `--vm-protection` для команды `vnet [create|update]`
* Добавлены команды `network [vnet-gateway|vpn-client|show-url]`.

### <a name="storage"></a>Хранилище

* Исправлена проблема, когда команды `storage account network-rule` могут не работать после обновления пакета SDK

### <a name="eventgrid"></a>Сетка событий

* Обновлен пакет SDK Python для службы "Сетка событий Azure" для использования новой версии API 2017-09-15-preview

### <a name="sql"></a>SQL

* Аргумент `--resource-group` для команды `sql server list` сделан необязательным. Если он не указан, возвращаются все серверы SQL Server в подписке
* Добавлен параметр `--no-wait` для команд `db [create|copy|restore|update|replica create|create|update]` и `dw [create|update]`

### <a name="keyvault"></a>Хранилище ключей

* Добавлена поддержка команд хранилища ключей за прокси-сервером

### <a name="vm"></a>ВМ

* Добавлена поддержка зоны доступности для команды `[vm|vmss|disk] create`
* Исправлена проблема, когда использование аргумента `--app-gateway ID` с командой `vmss create` приводило к сбою
* Добавлен аргумент `--asgs` для команды `vm create`
* Добавлена поддержка выполнения команд на виртуальных машинах с помощью команды `vm run-command`
* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлена поддержка шифрования диска VMSS с помощью команды `vmss encryption`
* Добавлена поддержка обслуживания виртуальных машин с помощью команды `vm perform-maintenance`

### <a name="acs"></a>ACS

* [ПРЕДВАРИТЕЛЬНАЯ ВЕРСИЯ] Добавлен аргумент `--orchestrator-release` для команды `acs create` для регионов служб ACS (предварительная версия)

### <a name="appservice"></a>Служба приложений

* Добавлена возможность обновлять и отображать параметры аутентификации с помощью команды `webapp auth [update|show]`

### <a name="backup"></a>Azure Backup

* Предварительный выпуск.


## <a name="september-11-2017"></a>11 сентября 2017 г.

Версия 2.0.17

### <a name="core"></a>Core

* Включен командный модуль для настройки собственного идентификатора корреляции в телеметрии.
* Исправлена проблема с дампом JSON, когда для телеметрии настроен режим диагностики.

### <a name="acs"></a>ACS

* Добавлена команда `acs list-locations`.
* Для `ssh-key-file` предоставляется ожидаемое значение по умолчанию.

### <a name="appservice"></a>Служба приложений

* Добавлена возможность создавать веб-приложения в группе ресурсов в рамках плана службы, отличной от активной.

### <a name="cdn"></a>CDN

* Исправлена ошибка "CustomDomain не пригоден к итерации" для `cdn custom-domain create`.

### <a name="extension"></a>Добавочный номер

* Первый выпуск

### <a name="keyvault"></a>Хранилище ключей

* Исправлена проблема с зависимостью разрешений от регистра для `keyvault set-policy`.

### <a name="network"></a>Сеть

* Команда `vnet list-private-access-services` переименована в `vnet list-endpoint-services`.
* Аргумент `--private-access-services` переименован в `--service-endpoints` для команды `vnet subnet create/update`.
* Добавлена поддержка нескольких диапазонов IP-адресов и портов в командах `nsg rule create/update`.
* Добавлена поддержка номера SKU в команде `lb create`.
* Добавлена поддержка номера SKU в команде `public-ip create`.

### <a name="resource"></a>Ресурс

* Разрешена передача в определениях параметров политики ресурсов в командах `policy definition create` и `policy definition update`.
* Разрешена передача значений параметров для команды `policy assignment create`.
* Разрешена передача JSON или файла для всех параметров.
* Версия API изменена на более позднюю.

### <a name="sql"></a>SQL

* Добавлены команды `sql server vnet-rule`.

### <a name="vm"></a>ВМ

* Исправлено: не назначать доступ, если `--scope` не предоставляется.
* Исправлено: использование тех же расширений имен, что и для портала.
* Удалено `subscription` из выходных данных `[vm|vmss] create`.
* Исправлено: номер SKU хранилища `[vm|vmss] create` неприменим для дисков данных с образом.
* Исправлено: `vm format-secret --secrets` не принимает идентификаторы, разделенные строками.

## <a name="august-31-2017"></a>31 августа 2017 г.

Версия 2.0.16

### <a name="keyvault"></a>Хранилище ключей

* Исправлена ошибка при попытке автоматически разрешить шифрование секрета с помощью `secret download`.

### <a name="sf"></a>Sf

* Объявлены неподдерживаемыми все команды; вместо них используется Service Fabric CLI (sfctl).

### <a name="storage"></a>Хранилище

* Исправлена проблема, когда учетные записи хранения нельзя было создавать в регионах, которые не поддерживают функцию NetworkACLs.
* Определение типа и кодировки содержимого во время передачи больших двоичных объектов и файла, если оба свойства не указаны.

## <a name="august-28-2017"></a>28 августа 2017 г.

Версия 2.0.15

### <a name="cli"></a>Интерфейс командной строки

* Для `--version` добавлено юридическое примечание.

### <a name="acs"></a>ACS

* Исправлены регионы, в которых доступна предварительная версия.
* Правильно отформатирован параметр по умолчанию `dns_name_prefix`.
* Оптимизированы выходные данные команды ACS.

### <a name="appservice"></a>Служба приложений

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Исправлены несоответствия в выходных данных `az webapp config appsettings [delete|set]`.
* Добавлен новый псевдоним `-i` в команду `az webapp config container set --docker-custom-image-name`.
* Предоставлена команда `az webapp log show`.
* Предоставлены новые аргументы команды `az webapp delete`, которые позволяют сохранить план службы приложений, метрики и данные регистрации DNS.
* Исправление. Параметры слота определяются правильно.

### <a name="iot"></a>Интернет вещей

* Исправление 3934. При создании политики существующие политики больше не удаляются.

### <a name="network"></a>Сеть

* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Команда `vnet list-private-access-services` переименована в `vnet list-endpoint-services`.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Параметр `--private-access-services` переименован в `--service-endpoints` в командах `vnet subnet [create|update]`.
* Добавлена поддержка нескольких диапазонов IP-адресов и портов в командах `nsg rule [create|update]`.
* Добавлена поддержка номера SKU в команде `lb create`.
* Добавлена поддержка номера SKU в команде `public-ip create`.

### <a name="profile"></a>Профиль

* Предоставлены параметры `--msi` и `--msi-port` для входа с использованием удостоверения виртуальной машины.

### <a name="service-fabric"></a>Service Fabric

* Предварительный выпуск.
* Упрощены правила реестра для паролей и имен пользователя для команды.
* Исправлена строка для ввода пароля пользователем даже после передачи параметра.
* Добавлена поддержка пустого значения `registry_cred`.

### <a name="storage"></a>Хранилище

* Появилась возможность задавать уровень большого двоичного объекта.
* Добавлены аргументы `--bypass` и `--default-action` в командах `storage account [create|update]` для поддержки туннелирования службы.
* Добавлены команды для добавления правил виртуальной сети и правил на основе IP-адресов в `storage account network-rule`.
* Разрешено шифрование службы с управляемым пользователем ключом.
* [КРИТИЧЕСКИ ВАЖНОЕ ИЗМЕНЕНИЕ.] Параметр `--encryption` переименован в `--encryption-services` в команде `az storage account create and az storage account update`.
* Исправление 4220. Несоответствие синтаксиса `az storage account update encryption`.

### <a name="vm"></a>ВМ

* Исправлена проблема, из-за которой для команды `vmss get-instance-view` отображались лишние и неправильные сведения при использовании параметра `--instance-id *`.
* Добавлена поддержка параметра `--lb-sku` в команде `vmss create`.
* Из черного списка имен администраторов для команд `[vm|vmss] create` удалены имена людей.
* Исправлена проблема, из-за которой команда `[vm|vmss] create` выдавала ошибку, если из образа не удавалось извлечь сведения о плане.
* Исправлена проблема, которая приводила к сбою при создании масштабируемого набора виртуальных машин с внутренней подсистемой балансировки нагрузки.
* Исправлена проблема, из-за которой аргумент `--no-wait` не работал с командой `vm availability-set create`.


## <a name="august-15-2017"></a>15 августа 2017 г.

Версия 2.0.14

### <a name="acs"></a>ACS

* Исправлен номер порта sshMaster0 для Kubernetes.

### <a name="appservice"></a>Служба приложений

* Исправлено исключение при создании веб-приложения Linux на основе Git.

### <a name="event-grid"></a>Сетка событий Azure

* Добавлены зависимости пакета SDK.

## <a name="august-11-2017"></a>11 августа 2017 г.

Версия 2.0.13

### <a name="acs"></a>ACS

* Добавлены дополнительные регионы, в которых доступна предварительная версия.

### <a name="batch"></a>Пакетная служба Azure

* Пакет SDK для пакетной службы обновлен до версии 3.1.0, а пакет SDK для управления пакетной службой — до версии 4.1.0.
* Добавлена новая команда для отображения количества задач в задании.
* Исправлена ошибка при обработке URL-адреса SAS файла ресурсов.
* Для конечной точки учетной записи пакетной службы теперь поддерживается дополнительный префикс https://.
* Поддерживается добавление к заданию списков, содержащих более 100 задач.
* Добавлено ведение журнала отладки при загрузке командного модуля расширений.

### <a name="component"></a>Компонент

* Добавлено предупреждение о прекращении поддержки в команды az component.

### <a name="container"></a>Контейнер

* `create`. Исправлена проблема, из-за которой запрещалось использовать знак равенства в переменной среды.


### <a name="data-lake-store"></a>Data Lake Store

* Включен индикатор хода выполнения.

### <a name="event-grid"></a>Сетка событий Azure

* Первый выпуск

### <a name="network"></a>Сеть

* `lb`. Исправлена проблема, из-за которой некоторые имена дочерних ресурсов не разрешались правильно, если не были указаны.
* `application-gateway {subresource} delete`. Исправлена проблема, из-за которой не учитывался параметр `--no-wait`.
* `application-gateway http-settings update`. Исправлена проблема, из-за которой не удавалось отключить параметр `--connection-draining-timeout`.
* Исправлена проблема с непредвиденным аргументом ключевого слова `sa_data_size_kilobyes` при использовании с командой `az network vpn-connection ipsec-policy add`.

### <a name="profile"></a>Профиль

* `account list`. Добавлен параметр `--refresh` для синхронизации последних подписок с сервером.

### <a name="storage"></a>Хранилище

* Включено обновление учетной записи хранения с помощью удостоверения, назначенного системой.

### <a name="vm"></a>ВМ

* `availability-set`. Предоставлено число доменов сбоя при преобразовании.
* Предоставлена команда `list-skus`.
* Поддерживается назначение удостоверений без создания назначений ролей.
* При подключении дисков данных применяется номер SKU хранилища.
* Удалено используемое по умолчанию имя диска ОС и номер SKU хранилища при использовании управляемых дисков.


## <a name="july-28-2017"></a>28 июля 2017 г.

Версия 2.0.12

* Добавлены команды для контейнеров.
* Добавлены модули выставления счетов и потребления ресурсов.

```text
azure-cli (2.0.12)

acr (2.0.9)
acs (2.0.11)
appservice (0.1.11)
batch (3.0.3)
billing (0.1.3)
cdn (0.0.6)
cloud (2.0.7)
cognitiveservices (0.1.6)
command-modules-nspkg (2.0.1)
component (2.0.6)
configure (2.0.10)
consumption (0.1.3)
container (0.1.7)
core (2.0.12)
cosmosdb (0.1.11)
dla (0.0.10)
dls (0.0.11)
feedback (2.0.6)
find (0.2.6)
interactive (0.3.7)
iot (0.1.10)
keyvault (2.0.8)
lab (0.0.9)
monitor (0.0.8)
network (2.0.11)
nspkg (3.0.1)
profile (2.0.9)
rdbms (0.0.5)
redis (0.2.7)
resource (2.0.11)
role (2.0.9)
sf (1.0.5)
sql (2.0.8)
storage (2.0.11)
vm (2.0.11)
```

### <a name="core"></a>Core

* Вывод сведений о пакетах SDK для проверки подлинности субъектов-служб с помощью сертификатов.
* Исправлены исключения в ходе выполнения развертывания.
* Для создания клиента подписки используется конечная точка ARM текущего облака.
* Улучшена параллельная обработка файла clouds.config (3636).
* Обновление идентификатора клиентского запроса при каждом выполнении команды.
* Создание клиентов подписки с правильным профилем SDK (3635).
* Создание отчетов о ходе выполнения развертывания шаблонов (3510).
* Добавлена поддержка выбора полей вывода в таблице с помощью запроса jmespath (3581).
* Улучшено отключение аргументов анализа и добавлено ведение журналов с помощью жестов (3434).
* Создание клиентов подписки с правильным профилем SDK.
* Перемещение всех существующих файлов записи в последнюю папку.
* Исправлена идемпотентность при создании виртуальной машины или масштабируемого набора виртуальных машин (3586).
* В путях команд больше не учитывается регистр.
* В определенных параметрах логического типа больше не учитывается регистр.
* Поддержка входа на локальный сервер AD FS, например Azure Stack.
* Исправлена параллельная запись в файл clouds.config (3255).

### <a name="acr"></a>ACR

* Добавлена команда `show-usage` для управляемых реестров.
* Поддержка обновления номера SKU для управляемых реестров.
* Добавлены управляемые реестры с управляемыми номерами SKU.
* Добавлены веб-перехватчики для управляемых реестров с использованием модуля для команды acr webhook.
* Добавлена проверка подлинности с помощью AAD с использованием команды acr login.
* Добавлена команда delete для репозиториев, манифестов и тегов Docker.

### <a name="acs"></a>ACS

* Поддержка API версии 2017-07-01.

### <a name="appservice"></a>Служба приложений

* Исправлена ошибка, из-за которой команда вывода списка в веб-приложениях Linux не возвращала данные.
* Поддержка извлечения учетных данных из ACR.
* Удаление всех команд группы `appservice web`.
* Создание масок паролей для реестров Docker из выходных данных команды (3656).
* Обеспечено использование браузера по умолчанию в macOS без ошибок (3623).
* Улучшена справка по командам `webapp log tail` и `webapp log download` (3624).
* Предоставлена команда `traffic-routing` для настройки статической маршрутизации (3566).
* Добавлены исправления, связанные с надежностью, при настройке системы управления версиями (3245).
* Удален неподдерживаемый аргумент `--node-version` из функции `webapp config update` для веб-приложений Windows. Вместо него используется `webapp config appsettings set --settings WEBSITE_NODE_DEFAULT_VERSION=...`.

### <a name="batch"></a>Пакетная служба Azure

* Пакеты SDK для пакетной службы обновлены до версии 3.0.0 с поддержкой низкоприоритетных виртуальных машин в пулах.
* Параметр команды `pool create` переименован с `--target-dedicated` в `--target-dedicated-nodes`.
* Для команды `pool create` добавлены параметры `--target-low-priority-nodes` и `--application-licenses`.

### <a name="cdn"></a>CDN

* Предоставлено улучшенное сообщение об ошибке для команды `cdn endpoint list`, которое отображается, если заданный параметром `--profile-name` профиль не существует.

### <a name="cloud"></a>Облако

* Формат версии API конечной точки метаданных облака изменен на следующий: ГГГГ-ММ-ДД.
* Конечная точка коллекции не является обязательной.
* Поддерживается регистрация облака только с конечной точкой диспетчера ARM.
* Предоставлен параметр в команде `cloud set` для выбора профиля при выборе текущего облака.
* Предоставлен параметр `endpoint_vm_image_alias_doc`.

### <a name="cosmosdb"></a>Cosmos DB

* Внесены исправления, которые позволяют создавать коллекцию с пользовательским ключом секции.
* Добавлена поддержка срока жизни по умолчанию для коллекции.

### <a name="data-lake-analytics"></a>Data Lake Analytics

* Добавлены команды для управления политикой вычислений в разделе `dla account compute-policy`.
* Добавлена команда `dla job pipeline show`.
* Добавлена команда `dla job recurrence list`.

### <a name="data-lake-store"></a>Data Lake Store

* Добавлена поддержка смены ключей пользовательского хранилища ключей в `dls account update`.
* Обновлена версия пакета SDK для базовой файловой системы Data Lake Store из-за проблем с производительностью.
* Добавлена команда `dls enable-key-vault`. Эта команда пытается активировать пользовательское хранилище ключей, предназначенное для шифрования данных в учетной записи Data Lake Store.

### <a name="interactive"></a>Интерактивный режим

* Улучшено время запуска с помощью кэшированных команд.
* Увеличено тестовое покрытие.
* Расширены возможности жеста "?", которые позволяют также вставить его в следующую команду.
* Исправлены ошибки с интерактивными функциями в предварительной версии профиля 2017-03-09 (3587).
* Разрешено использовать `--version` в качестве параметра в интерактивном режиме (3645).
* В интерактивном режиме больше не возникают ошибки при выполнении проверки (3570).
* Создание отчетов о ходе выполнения развертывания шаблонов (3510).
* Добавлен флаг `--progress`.
* Из вариантов завершения удалены `--debug` и `--verbose`.
* Из вариантов завершения удален `interactive` (3324).

### <a name="iot"></a>Интернет вещей

* Исправлено. При создании политики больше не удаляются существующие политики (3934).

### <a name="key-vault"></a>Хранилище ключей

* Добавлены команды для функций восстановления хранилища ключей:
  * `keyvault`, подкоманды `purge`, `recover` и `keyvault list-deleted`.
  * `keyvault secret`, подкоманды `backup`, `restore`, `purge`, `recover` и `list-deleted`;
  * `keyvault certificate`, подкоманды `purge`, `recover` и `list-deleted`;
  * `keyvault key`, подкоманды `purge`, `recover` и `list-deleted`.
* Добавлена интеграция хранилища ключей с субъектом-службой (3133).
* Обновлена плоскость данных хранилища ключей до версии 0.3.2 (3307).

### <a name="lab"></a>Лаборатория

* Добавлена поддержка запросов ко всем виртуальным машинам в лаборатории с помощью `az lab vm claim`.
* Добавлен модуль форматирования табличных выходных данных команд `az lab vm list` и `az lab vm show`.

### <a name="monitor"></a>Мониторинг

* Исправлены ошибки с файлом шаблона с помощью команды `monitor autoscale-settings get-parameters-template` (3349).
* Команда `monitor alert-rule-incidents list` переименована в `monitor alert list-incidents`.
* Команда `monitor alert-rule-incidents show` переименована в `monitor alert show-incident`.
* Команда `monitor metric-defintions list` переименована в `monitor metrics list-definitions`.
* Команда `monitor alert-rules` переименована в `monitor alert`.
* В команду `monitor alert create` внесены следующие изменения:
  * подкоманды `condition` и `action` больше не принимают данные JSON;
  * добавлены различные параметры, которые упрощают процесс создания правила;
  * параметр `location` больше не требуется;
  * добавлена поддержка имени и идентификатора для целевого объекта;
  * удален параметр `--alert-rule-resource-name`;
  * параметр `is-enabled` переименован в `enabled`, он больше не требуется;
  * значения по умолчанию для `description` теперь основаны на указанном условии;
  *  добавлены примеры, в которых подробно представлен новый формат.
* Поддержка имен или идентификаторов для команд `monitor metric`.
* Добавлены вспомогательные аргументы и примеры использования команды `monitor alert rule update`.

### <a name="network"></a>Сеть

* Добавлена команда `list-private-access-services`.
* Добавлен аргумент `--private-access-services` в команды `vnet subnet create` и `vnet subnet update`.
* Исправлена проблема, из-за которой команда `application-gateway redirect-config create` завершалась ошибкой.
* Исправлена проблема, из-за которой команда `application-gateway redirect-config update` не работала с параметром `--no-wait`.
* Исправлена ошибка при использовании аргумента `--servers` с командами `application-gateway address-pool create` и `application-gateway address-pool update`.
* Добавлены команды `application-gateway redirect-config`.
* В команду `application-gateway ssl-policy` добавлены подкоманды `list-options`, `predefined list` и `predefined show`.
* В команду `application-gateway ssl-policy set` добавлены аргументы `--name`, `--cipher-suites` и `--min-protocol-version`.
* В команды `application-gateway http-settings create` и `application-gateway http-settings update` добавлены аргументы `--host-name-from-backend-pool`, `--affinity-cookie-name`, `--enable-probe` и `--path`.
* В команды `application-gateway url-path-map create` и `application-gateway url-path-map update` добавлены аргументы `--default-redirect-config` и `--redirect-config`.
* Добавлен аргумент `--redirect-config` в команду `application-gateway url-path-map rule create`.
* Добавлена поддержка параметра `--no-wait` в команде `application-gateway url-path-map rule delete`.
* В команды `application-gateway probe create` и `application-gateway probe update` добавлены аргументы `--host-name-from-http-settings`, `--min-servers`, `--match-body` и `--match-status-codes`.
* Добавлен аргумент `--redirect-config` в команды `application-gateway rule create` и `application-gateway rule update`.
* Добавлена поддержка аргумента `--accelerated-networking` в командах `nic create` и `nic update`.
* Удален аргумент `--internal-dns-name-suffix` из команды `nic create`.
* Добавлена поддержка параметра `--dns-servers` в командах `nic update` и `nic create`. Добавлена поддержка параметра --dns-servers.
* Исправлена ошибка, из-за которой команда `local-gateway create` игнорировала параметр `--local-address-prefixes`.
* Добавлена поддержка параметра `--dns-servers` в команде `vnet update`.
* Исправлена ошибка при создании пиринга без фильтрации маршрутов с помощью команды `express-route peering create`.
* Исправлена ошибка, из-за которой аргументы `--provider` и `--bandwidth` не работали с командой `express-route update`.
* Исправлена ошибка с логикой установки значений по умолчанию в команде `network watcher show-topology`.
* Улучшено форматирование выходных данных команды `network list-usages`.
* В команде `application-gateway http-listener create` используется интерфейсный IP-адрес по умолчанию, если он существует.
* В команде `application-gateway rule create` используются пул адресов, параметры HTTP и прослушиватель HTTP по умолчанию, если они существуют.
* В команде `lb rule create` используются интерфейсный IP-адрес и серверный пул по умолчанию, если они существуют.
* В команде `lb inbound-nat-rule create` используется интерфейсный IP-адрес по умолчанию, если он существует.

### <a name="profile"></a>Профиль

* Поддержка входа на виртуальную машину с использованием управляемого удостоверения.
* Поддержка вывода данных команды `account show` в формате файла проверки подлинности с помощью пакета SDK.
* При использовании параметра --expanded-view отображаются предупреждения о прекращении поддержки.
* Добавлена команда `get-access-token` для предоставления необработанного токена AAD.
* Поддержка входа с учетной записью пользователя без связанных подписок.

### <a name="rdbms"></a>Реляционная СУБД

* Поддержка вывода списка серверов в подписке (3417).
* Исправлена проблема, когда объект `%s` не обрабатывался из-за отсутствия `% server_type` (3393).
* Исправлено сопоставление источника документа и добавлена задача непрерывной интеграции для проверки (3361).
* Исправлена справка по MySQL и PostgreSQL (3369).

### <a name="resource"></a>Ресурс

* Улучшены запросы на ввод отсутствующих параметров для команды `group deployment create`.
* Улучшен анализ синтаксиса `--parameters KEY=VALUE`.
* Исправлены проблемы, из-за которых файлы параметров `group deployment create` не распознавались с использованием синтаксиса `@<file>`.
* Поддержка аргумента `--ids` в командах `resource` и `managedapp`.
* Исправлены некоторые сообщения об ошибках и анализе (3584).
* Исправлены ошибки анализа параметра `--resource-type` в команде `lock`. Теперь принимаются `<resource-namespace>` и `<resource-type>`.
* Добавлена проверка параметров для шаблонов для ссылок на шаблоны (3629).
* Добавлена поддержка указания параметров развертывания с использованием синтаксиса `KEY=VALUE`.

### <a name="role"></a>Роль

* Поддержка вывода данных команды `create-for-rbac` в формате файла проверки подлинности с помощью пакета SDK.
* Добавлена очистка назначений ролей и связанного приложения AAD при удалении субъекта-службы (3610).
* В описания аргументов `--start-date` и `--end-date` команды `app create` добавлен формат времени.
* При использовании параметра `--expanded-view` отображаются предупреждения о прекращении поддержки.
* Добавлена интеграция хранилища ключей для команд `create-for-rbac` и `reset-credentials`.

### <a name="service-fabric"></a>Service Fabric
* Исправлена ошибка, из-за которой большие файлы в приложениях усекались при отправке (3666).
* Добавлены тесты для команд Service Fabric (3424).
* Исправлены многие команды Service Fabric (3234).

### <a name="sql"></a>SQL

* Удален недействительный параметр `--identity` команды `sql server create`.
* Удалены значения паролей из выходных данных команд `sql server create` и `sql server update`.
* Добавлены команды `sql db list-editions` и `sql elastic-pool list-editions`.

### <a name="storage"></a>Хранилище

* Удален параметр `--marker` из команд `storage blob list`, `storage container list` и `storage share list` (3745).
* Включено создание учетных записей хранения с поддержкой только HTTPS.
* Обновлены метрики хранилища, команды входа и CORS (3495).
* Перефразировано сообщение об исключении, которое выводит команда добавления CORS (3638) (3362)
* Генератор преобразован в список в режиме пробного выполнения команды пакетной загрузки (3592).
* Исправлена проблема при пробном выполнении команды пакетной загрузки больших двоичных объектов (3640) (3592).

### <a name="vm"></a>ВМ

* Поддержка настройки NSG.
* Исправлена ошибка, из-за которой не удавалось правильно настроить DNS-сервер.
* Поддержка удостоверений управляемой службы.
* Исправлена проблема, из-за которой для команды `cmss create` с существующей подсистемой балансировки нагрузки требовался параметр `--backend-pool-name`.
* Теперь нумерация LUN дисков данных, создаваемых с помощью команды `vm image create`, начинается с 0.


## <a name="may-10-2017"></a>10 мая 2017 г.

Версия 2.0.6

* Модуль documentdb переименован в cosmosdb.
* Добавлена реляционная СУБД (MySQL, Postgres).
* Добавлены модули Data Lake Store и Data Lake Analytics.
* Добавлен модуль Cognitive Services.
* Добавлен модуль Service Fabric.
* Добавлен модуль Interactive (az-shell переименован).
* Добавлена поддержка команд CDN.
* Удален модуль Container.
* Добавлена команда az -v для az --version ([#2926](https://github.com/Azure/azure-cli/issues/2926)).
* Повышена производительность загрузки пакетов и выполнения команд ([№ 2819](https://github.com/Azure/azure-cli/issues/2819)).

```text
azure-cli (2.0.6)

acr (2.0.4)
acs (2.0.6)
appservice (0.1.6)
batch (2.0.4)
cdn (0.0.2)
cloud (2.0.2)
cognitiveservices (0.1.2)
command-modules-nspkg (2.0.0)
component (2.0.4)
configure (2.0.6)
core (2.0.6)
cosmosdb (0.1.6)
dla (0.0.6)
dls (0.0.6)
feedback (2.0.2)
find (0.2.2)
interactive (0.3.1)
iot (0.1.5)
keyvault (2.0.4)
lab (0.0.4)
monitor (0.0.4)
network (2.0.6)
nspkg (3.0.0)
profile (2.0.4)
rdbms (0.0.1)
redis (0.2.3)
resource (2.0.6)
role (2.0.4)
sf (1.0.1)
sql (2.0.3)
storage (2.0.6)
vm (2.0.6)
```

### <a name="core"></a>Core

* Ядро: запись исключений, порожденных незарегистрированным поставщиком, и его автоматическая регистрация.
* Производительность: сохранение кэша маркеров библиотеки ADAL в памяти до завершения работы процесса ([№ 2603](https://github.com/Azure/azure-cli/issues/2603)).
* Исправление байтов, возвращаемых из шестнадцатеричных отпечатков -o tsv ([#3053](https://github.com/Azure/azure-cli/issues/3053)).
* Улучшенное скачивание сертификатов Key Vault и интеграция субъектов-служб AAD ([#3003](https://github.com/Azure/azure-cli/issues/3003)).
* Добавлено расположение Python в az -version ([#2986](https://github.com/Azure/azure-cli/issues/2986)).
* Вход: поддержка входа при отсутствии подписок ([#2929](https://github.com/Azure/azure-cli/issues/2929)).
* Ядро: устранен сбой при двукратном входе с помощью субъекта-службы ([#2800](https://github.com/Azure/azure-cli/issues/2800)).
* Ядро: возможность настроить путь к файлу accessTokens.json с помощью env var ([#2605](https://github.com/Azure/azure-cli/issues/2605)).
* Ядро: возможность применять настроенные параметры по умолчанию к необязательным аргументам ([№ 2703](https://github.com/Azure/azure-cli/issues/2703)).
* Ядро: повышение производительности.
* Ядро: настаиваемые сертификаты ЦС — поддержка настройки переменной среды REQUESTS_CA_BUNDLE.
* Ядро: облачная конфигурация — использование конечной точки Resource Manager, если не задана конечная точка управления.

### <a name="acs"></a>ACS

* Исправление: теперь значение счетчика баз данных master и агентов — целое число, а не строка.
* Предоставлены команды az acs create --no-wait и az acs wait для асинхронного создания.
* Предоставлена команда az acs create --validate для пробного создания.
* Удален профиль Windows перед вызовом метода PUT для команды scale ([№ 2755](https://github.com/Azure/azure-cli/issues/2755)).

### <a name="appservice"></a>AppService

* Приложение-функция: добавлена полная поддержка приложений-функций, включая создание, отображение, вывод списка, удаление, настройку имени узла, настройку протокола SSL и т. д.
* Добавлены службы Team Services (VSTS) в качестве параметра непрерывной доставки в конфигурации веб-системы управления версиями службы приложений.
* Создана команда az webapp, заменяющая команду az appservice web (для обеспечения обратной совместимости команда az appservice web будет оставлена еще в двух выпусках).
* Предоставлены аргументы для настройки развертывания и стеков времени выполнения при создании веб-приложения.
* Предоставлена команда webapp list-runtimes.
* Поддержка настройки строк подключения ([№ 2647](https://github.com/Azure/azure-cli/issues/2647)).
* Поддержка переключения слотов с предварительным просмотром.
* Устранены ошибки из команд службы приложений ([№ 2948](https://github.com/Azure/azure-cli/issues/2948)).
* Использование группы ресурсов в плане служб приложений для операций с сертификатами ([№ 2750](https://github.com/Azure/azure-cli/issues/2750)).

### <a name="cosmosdb"></a>Cosmos DB

* Модуль documentdb переименован в cosmosdb.
* Добавлена поддержка интерфейсов API уровня данных DocumentDB: управление базами данных и коллекциями.
* Добавлена поддержка включения автоматической отработки отказа для учетных записей базы данных.
* Добавлена поддержка нового параметра ConsistentPrefix политики согласованности.

### <a name="data-lake-analytics"></a>Data Lake Analytics

* Исправлена ошибка, из-за которой фильтрация списков заданий по результату и состоянию вызывала сбой.
* Добавлена поддержка нового типа элемента каталога — пакета. Для доступа к нему используется `az dla catalog package`.
* Появилась возможность вывести список следующих элементов каталога из базы данных (указание схемы не требуется):

  * Таблица
  * функция с табличным значением;
  * Просмотр
  * статистика таблицы. Их можно также вывести с помощью схемы, но без указания имени таблицы.

### <a name="data-lake-store"></a>Data Lake Store

* Обновлена версия пакета SDK базовой файловой системы, что обеспечивает лучшую поддержку сценариев регулирования на стороне сервера.
* Повышена производительность загрузки пакетов и выполнения команд ([#2819](https://github.com/Azure/azure-cli/issues/2819)).
* Отсутствовала справка для команды access show. Теперь она добавлена. ([№ 2743](https://github.com/Azure/azure-cli/issues/2743))

### <a name="find"></a>Поиск

* Улучшены результаты поиска и разрешено управление версиями индекса поиска.

### <a name="keyvault"></a>Хранилище ключей

* BC: в команде `az keyvault certificate download` параметр -e со строкового или двоичного значения изменен на PEM или DER, чтобы лучше представить параметры.
* BC: из команды `keyvault certificate create` удалены параметры --expires и --not-before, так как они не поддерживаются службой.
* В команду `keyvault certificate create` добавлен параметр --validity для выборочного переопределения значение в параметре --policy.
* Исправлена ошибка в команде `keyvault certificate get-default-policy`, в которой были доступны параметры expires и not_before, а параметр validity_in_months — нет.
* Добавлено исправление для модуля keyvault для импорта PEM- и PFX-файлов ([#2754](https://github.com/Azure/azure-cli/issues/2754)).

### <a name="lab"></a>Лаборатория

* Добавлены команды создания, отображения, удаления и вывода списка для среды в лаборатории.
* Добавлены команды отображения и вывода списка для просмотра шаблонов ARM в лаборатории.
* В команду `az lab vm list` добавлен флаг --environment для фильтрации виртуальных машин по среде в лаборатории.
* Добавлена вспомогательная команда `az lab formula export-artifacts` для экспорта шаблона артефакта в формуле лаборатории.
* Добавлены команды для управления секретами в лаборатории.

### <a name="monitor"></a>Мониторинг

* Исправление ошибки: моделирование `--actions` в `az alert-rules create` для использования строки в формате JSON ([№ 3009](https://github.com/Azure/azure-cli/issues/3009)).
* Исправление ошибки: при создании параметров диагностики не принимались журналы и метрики из команды show ([№ 2913](https://github.com/Azure/azure-cli/issues/2913)).

### <a name="network"></a>Сеть

* Добавлена команда `network watcher test-connectivity`.
* Добавлена поддержка параметра `--filters` в команде `network watcher packet-capture create`.
* Добавлена поддержка фильтрации подключений шлюза приложений.
* Добавлена поддержка конфигурации набора правил WAF шлюза приложений.
* Добавлена поддержка правил и фильтров маршрутов ExpressRoute.
* Добавлена поддержка географической маршрутизации диспетчера трафика.
* Добавлена поддержка селекторов трафика на основе политик для VPN-подключений.
* Добавлена поддержка политик IPSec для VPN-подключений.
* Исправлена ошибка `vpn-connection create`, возникавшая при использовании параметра `--no-wait` или `--validate`.
* Добавлена поддержка шлюзов виртуальной сети "активный-активный".
* Удалены значения NULL из выходных данных команды `network vpn-connection list/show`.
* BC: исправлена ошибка в выходных данных `vpn-connection create`.
* Исправлена ошибка, приводившая к неправильному анализу аргумента --key-length команды vpn-connection create.
* Исправлена ошибка в `dns zone import`, из-за которой записи не импортировались правильно.
* Исправлена ошибка, из-за которой команда `traffic-manager endpoint update` не работала.
* Добавлены команды предварительного просмотра для Наблюдателя за сетями.

### <a name="profile"></a>Профиль

* Поддержка входа при отсутствии подписок ([№ 2560](https://github.com/Azure/azure-cli/issues/2560)).
* Поддержка сокращенных имен параметров в команде az account set --subscription ([№ 2980](https://github.com/Azure/azure-cli/issues/2980)).

### <a name="redis"></a>Redis

* Добавлена команда update, которая также добавляет возможность масштабирования для кэша Redis.
* Команда update-settings объявляется нерекомендуемой.

### <a name="resource"></a>Ресурс

* Добавлены команды определения managedapp и managedapp ([№ 2985](https://github.com/Azure/azure-cli/issues/2985)).
* Включена поддержка команд provider operation ([#2908](https://github.com/Azure/azure-cli/issues/2908)).
* Поддержка создания универсального ресурса ([№ 2606](https://github.com/Azure/azure-cli/issues/2606)).
* Исправлен анализ ресурсов и поиск версии API. ([№ 2781](https://github.com/Azure/azure-cli/issues/2781))
* Добавлены документы для команды az lock update. ([№ 2702](https://github.com/Azure/azure-cli/issues/2702))
* Исправлена ошибка, возникавшая при попытке вывести список ресурсов группы, которая не существует. ([№ 2769](https://github.com/Azure/azure-cli/issues/2769))
* [Вычисления.] Устранены проблемы с масштабируемым набором виртуальных машин и обновлением группы доступности виртуальных машин. ([№ 2773](https://github.com/Azure/azure-cli/issues/2773))
* Исправлена блокировка создания и удаления, возникающая, если параметр parent-resource-path не указан ([№ 2742](https://github.com/Azure/azure-cli/issues/2742)).

### <a name="role"></a>Роль

* create-for-rbac: гарантируется, что дата завершения работы поставщика служб не может превышать срок действия сертификата ([№ 2989](https://github.com/Azure/azure-cli/issues/2989)).
* RBAC: добавлена полная поддержка команды ad group ([#2016](https://github.com/Azure/azure-cli/issues/2016)).
* Роль: устранены проблемы при обновлении определения роли ([№ 2745](https://github.com/Azure/azure-cli/issues/2745)).
* create-for-rbac: обеспечен выбор введенного пользователем пароля.

### <a name="sql"></a>SQL

* Добавлены команды az sql server list-usages и az sql db list-usages.
* SQL: добавлена возможность прямого подключения к поставщику ресурса ([#2832](https://github.com/Azure/azure-cli/issues/2832)).

### <a name="storage"></a>Хранилище

* Добавлено расположение по умолчанию группы ресурсов для `storage account create`.
* Добавлена поддержка добавочного копирования больших двоичных объектов.
* Добавлена поддержка передачи больших блочных BLOB-объектов.
* Размер блока изменяется и составляет 100 МБ, если передается файл, чей размер превышает 200 ГБ.

### <a name="vm"></a>ВМ

* avail-set: число доменов обновления и доменов сбоя сделано необязательным.

  Примечание. Команды виртуальной машины в независимых облаках: избегайте использовать функции, связанные с Управляемыми дисками, включая следующие:
  1. az disk/snapshot/image
  2. az vm/vmss disk
  3. В команде az vm/vmss create используйте параметр --use-unmanaged-disk, чтобы избежать использования Управляемых дисков. Другие команды должны работать.
* vm/vmss: улучшен текст предупреждения при создании пары ключей SSH.
* vm/vmss: поддержка создания из образа Marketplace, для которого требуются сведения о плане ([№ 1209](https://github.com/Azure/azure-cli/issues/1209)).


## <a name="april-3-2017"></a>3 апреля 2017 г.

Версия 2.0.2

В этом выпуске мы добавили компоненты ACR, Batch, KeyVault и SQL.

```text
azure-cli (2.0.2)

acr (2.0.0)
acs (2.0.2)
appservice (0.1.2)
batch (2.0.0)
cloud (2.0.0)
component (2.0.0)
configure (2.0.2)
container (0.1.2)
core (2.0.2)
documentdb (0.1.2)
feedback (2.0.0)
find (0.0.1b1)
iot (0.1.2)
keyvault (2.0.0)
lab (0.0.1)
monitor (0.0.1)
network (2.0.2)
nspkg (2.0.0)
profile (2.0.2)
redis (0.1.1b3)
resource (2.0.2)
role (2.0.1)
sql (2.0.0)
storage (2.0.2)
vm (2.0.2)
```

### <a name="core"></a>Core

* Модули Acr, Lab, Monitor и Find добавлены в список по умолчанию.
* Вход: пропуск неправильного клиента ([#2634](https://github.com/Azure/azure-cli/pull/2634)).
* Вход: для подписки по умолчанию задано значение 1 с состоянием "Включено" ([#2575](https://github.com/Azure/azure-cli/pull/2575)).
* Добавлена поддержка команд wait и --no-wait для дополнительных команд ([#2524](https://github.com/Azure/azure-cli/pull/2524)).
* Core: поддержка входа при помощи субъекта-службы с использованием сертификата ([#2457](https://github.com/Azure/azure-cli/pull/2457)).
* Добавлен запрос для отсутствующих параметров шаблона ([#2364](https://github.com/Azure/azure-cli/pull/2364)).
* Добавлена поддержка установки параметров по умолчанию для таких распространенных аргументов, как группа ресурсов по умолчанию, веб-страница по умолчанию, виртуальная машина по умолчанию.
* Добавлена поддержка входа на конкретный клиент.

### <a name="acs"></a>ACS

* [ACS] Добавлена поддержка настройки кластера ACS по умолчанию ([#2554](https://github.com/Azure/azure-cli/pull/2554)).
* Добавлена поддержка запроса пароля для ключа SSH ([#2044](https://github.com/Azure/azure-cli/pull/2044)).
* Добавлена поддержка кластеров Windows ([#2211](https://github.com/Azure/azure-cli/pull/2211)).
* Добавлена возможность изменения роли "Владелец" на роль "Участник" ([#2321](https://github.com/Azure/azure-cli/pull/2321)).

### <a name="appservice"></a>AppService

* AppService: добавлена поддержка получения внешнего IP-адреса, используемого для записей DNS типа A ([#2627](https://github.com/Azure/azure-cli/pull/2627)).
* AppService: добавлена поддержка привязки групповых сертификатов ([#2625](https://github.com/Azure/azure-cli/pull/2625)).
* AppService: добавлена поддержка профилей для публикации списком ([#2504](https://github.com/Azure/azure-cli/pull/2504)).
* AppService: добавлен триггер синхронизации с системой управления версиями после настройки ([#2326](https://github.com/Azure/azure-cli/pull/2326)).

### <a name="datalake"></a>Data Lake

* Первый выпуск модуля Data Lake Analytics.
* Первый выпуск модуля Data Lake Store.

### <a name="docuemntdb"></a>DocumentDB

* DocumentDB: добавлена поддержка для получения списка строк подключения ([#2580](https://github.com/Azure/azure-cli/pull/2580)).

### <a name="vm"></a>ВМ

* [Вычисления] Добавлена поддержка AppGateway для создания масштабируемого набора виртуальных машин ([#2570](https://github.com/Azure/azure-cli/pull/2570)).
* [ВМ и VMSS] Улучшена поддержка кэширования диска ([#2522](https://github.com/Azure/azure-cli/pull/2522)).
* ВМ и VMSS: внедрена логика проверки учетных данных, используемая на портале ([#2537](https://github.com/Azure/azure-cli/pull/2537)).
* Добавлена поддержка команд wait и --no-wait ([#2524](https://github.com/Azure/azure-cli/pull/2524)).
* Масштабируемый набор виртуальных машин: добавлена поддержка * для представления экземпляров на виртуальных машинах в виде списка ([#2467](https://github.com/Azure/azure-cli/pull/2467)).
* Добавлен параметр --secrets для виртуальной машины и масштабируемого набора виртуальных машин ([#2212}(<https://github.com/Azure/azure-cli/pull/2212>)).
* Добавлено разрешение на создание виртуальных машин на основе специализированного образа VHD ([#2256](https://github.com/Azure/azure-cli/pull/2256)).

## <a name="february-27-2017"></a>27 февраля 2017 г.

Версия 2.0.0

Этот первый общедоступный выпуск Azure CLI 2.0. Общедоступными являются такие командные модули:
- служба контейнеров (ACS);
- вычисления (в том числе Resource Manager, виртуальная машина, масштабируемые наборы виртуальных машин, управляемые диски);
- Сеть
- Хранилище

Эти командные модули могут использоваться в рабочих средах. Они поддерживаются стандартными соглашениями Майкрософт об уровне обслуживания. Вы можете отправлять запросы непосредственно в службу технической поддержки Майкрософт или добавлять описание проблем в наш [список на сайте GitHub](https://github.com/azure/azure-cli/issues/). Вы можете задавать вопросы на [сайте StackOverflow, используя тег azure-cli](http://stackoverflow.com/questions/tagged/azure-cli), или обращаться к группе разработчиков по адресу электронной почты [azfeedback@microsoft.com](mailto:azfeedback@microsoft.com). Можно отправлять отзывы из командной строки с помощью команды `az feedback`.

Команды в этих модулях стабильны, и предполагается, что в следующих выпусках этой версии Azure CLI их синтаксис не будет меняться.

Проверить версию CLI можно с помощью команды `az --version`. В выходных данных указана версия самого интерфейса командной строки (2.0.0 в этом выпуске), версии отдельных командных модулей и используемые вами версии Python и GCC.

```text
azure-cli (2.0.0)

acs (2.0.0)
appservice (0.1.1b5)
batch (0.1.1b4)
cloud (2.0.0)
component (2.0.0)
configure (2.0.0)
container (0.1.1b4)
core (2.0.0)
documentdb (0.1.1b2)
feedback (2.0.0)
iot (0.1.1b3)
keyvault (0.1.1b5)
network (2.0.0)
nspkg (2.0.0)
profile (2.0.0)
redis (0.1.1b3)
resource (2.0.0)
role (2.0.0)
sql (0.1.1b5)
storage (2.0.0)
vm (2.0.0)

Python (Darwin) 2.7.10 (default, Jul 30 2016, 19:40:32)
[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]
```

> [!Note]
> Некоторые командные модули имеют постфикс b*n* или rc*n*. Эти командные модули все еще находятся на стадии предварительной версии и станут общедоступными в будущем.

У нас также есть предварительные ежедневные сборки CLI. Дополнительные сведения см. в инструкциях по [получению ежедневных сборок](https://github.com/Azure/azure-cli#nightly-builds), а также в инструкциях по [настройке среды разработки и участии в написании кода](https://github.com/Azure/azure-cli#developer-setup).

О проблемах с предварительными ежедневными сборками можно сообщить несколькими способами:
- добавив информацию о проблемах в наш [список на сайте GitHub](https://github.com/azure/azure-cli/issues/);
- Свяжитесь с командой разработчиков ([azfeedback@microsoft.com](mailto:azfeedback@microsoft.com)),
- отправив отзыв из командной строки с помощью команды `az feedback`.

