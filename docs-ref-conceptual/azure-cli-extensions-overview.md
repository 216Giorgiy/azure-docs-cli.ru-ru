---
title: Расширения Azure CLI 2.0
description: Использование расширений с Azure CLI 2.0
keywords: Azure CLI, расширения
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 03/15/2018
ms.topic: conceptual
ms.prod: azure
ms.technology: azure-cli
ms.devlang: azure-cli
ms.openlocfilehash: 01d7b3d58bf24d5a30386564fb64630d4db055e3
ms.sourcegitcommit: ae72b6c8916aeb372a92188090529037e63930ba
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2018
---
# <a name="using-extensions-with-the-azure-cli-20"></a>Использование расширений с Azure CLI 2.0

Расширения — это отдельные модули, которые не входят в состав Azure CLI. Они позволяют добавлять функциональные возможности с помощью новых команд. Это могут быть предложения в экспериментальной или предварительной версии, специализированные средства от Майкрософт или пользовательские решения, которые вы написали самостоятельно. Расширения повышают гибкость работы с CLI, позволяя адаптировать интерфейс для определенных целей. При этом не требуется передавать большое число дополнительных пакетов, которые не входят в набор основных компонентов.

Из этой статьи вы узнаете, как устанавливать, обновлять и удалять расширения для CLI. Кроме того, здесь содержатся ответы на часто задаваемые вопросы о поведении расширений.

## <a name="find-extensions"></a>Поиск расширений

Чтобы узнать, какие расширения доступны, вы можете использовать команду [az extension list-available](/cli/azure/extension#az-extension-list-available). Это команда отображает список доступных официальных расширений, которые предоставляются и обслуживаются корпорацией Майкрософт.

```azurecli
az extension list-available --output table
```

Мы также добавили [список расширений Microsoft](azure-cli-extensions-list.md) на сайт с документацией.

## <a name="install-extensions"></a>Установка расширений

Когда вы найдете расширение для установки, используйте команду [az extension add](https://docs.microsoft.com/en-us/cli/azure/extension#az-extension-add), чтобы получить его. Если расширение включено в список в `az extension list-available`, его можно установить по имени.

```azurecli
az extension add --name <extension-name>
```

Если требуется расширение из внешнего ресурса или у вас есть прямая ссылка на него, можно указать URL-адрес источника или локальный путь. Это _должен_ быть скомпилированный wheel-файл Python.

```azurecli
az extension add --source <URL-or-path>
```

После установки расширения сведения о нем отображаются в значении переменной оболочки `$AZURE_EXTENSION_DIR`. Если эта переменная не задана, в Linux и macOS по умолчанию устанавливается значение `$HOME/.azure/cliextensions`, а в Windows — `%USERPROFILE%\.azure\cliextensions`.

## <a name="update-extensions"></a>Обновление расширений

Если расширение устанавливалось по имени, его можно обновить с помощью команды [az extension update](https://docs.microsoft.com/en-us/cli/azure/extension#az-extension-update).

```azurecli
az extension update --name <extension-name>
```

В противном случае расширение можно обновить из источника, выполнив инструкции по [установке расширений](#install-extensions).

Если имя расширения по какой-либо причине не разрешается с помощью CLI, удалите его и установите повторно. Также есть вероятность, что расширение, которое предоставлялось в режиме предварительной версии, теперь является встроенной командой CLI. Попробуйте обновить CLI, как описано в руководстве по [установке CLI Azure 2.0](install-azure-cli.md), и проверьте, добавлены ли команды расширения. 

## <a name="uninstall-extensions"></a>Удаление расширений

Если расширение больше не нужно, можно удалить его с помощью команды [az extension remove](https://docs.microsoft.com/en-us/cli/azure/extension#az-extension-remove).

```azurecli
az extension remove --name <extension-name>
```

Также расширение можно вручную удалить из расположения, в котором оно установлено. Для переменной оболочки устанавливается значение `$AZURE_EXTENSION_DIR`. Если эта переменная не задана, в Linux и macOS по умолчанию устанавливается значение `$HOME/.azure/cliextensions`, а в Windows — `%USERPROFILE%\.azure\cliextensions`.

```bash
rm -rf $AZURE_EXTENSION_DIR/<extension-name>
```

Для удаления рекомендуется использовать `az extension remove`.

## <a name="faq"></a>Часто задаваемые вопросы

Ниже приведены ответы на некоторые часто задаваемые вопросы о расширениях CLI.

### <a name="what-file-formats-are-allowed-for-installation"></a>Какие форматы файлов разрешены для установки?

Сейчас в качестве расширений можно устанавливать только wheel-файлы Python.

### <a name="can-extensions-replace-existing-commands"></a>Могут ли расширения заменить существующие команды?

Да. Расширения могут заменить существующие команды. Но перед выполнением замененной команды в CLI отобразится предупреждение.

### <a name="how-can-i-tell-if-an-extension-is-in-pre-release"></a>Как понять, что расширение выпущено в предварительной версии?

Если расширение предоставляется в предварительной версии, в документации и сведениях о версии расширения должно содержаться соответствующее указание. Кроме того, в качестве расширений корпорация Майкрософт часто выпускает предварительные версии команд, которые в дальнейшем планируется перенести в основной интерфейс CLI.

### <a name="can-extensions-depend-upon-each-other"></a>Могут ли расширения зависеть друг от друга?

Нет. Расширения должны быть отдельными не зависящими друг от друга пакетами. CLI не дает гарантий относительно того, когда будет загружено то или иное расширение. Поэтому нельзя гарантировать и соблюдение зависимостей. Устанавливается только одно конкретное расширение, и оно должно продолжать работать, даже если вы удалите другие расширения.

### <a name="are-extensions-updated-along-with-the-cli"></a>Обновляются ли расширения вместе с CLI?

Нет. Расширения следует обновлять отдельно, как описано в разделе [Обновление расширений](#update-extensions).
