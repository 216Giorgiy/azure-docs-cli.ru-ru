---
title: Варианты настройки Azure CLI
description: Как настроить Azure CLI 2.0
keywords: Azure CLI, configuration, settings, Azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 12/13/2017
ms.topic: conceptual
ms.prod: azure
ms.technology: azure-cli
ms.devlang: azure-cli
ms.openlocfilehash: dac383fa0dbd785f9448514e3d0a3242e4853038
ms.sourcegitcommit: 42f1ba77b2f562d89dadd302655d1f02ee4b6130
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2018
---
# <a name="azure-cli-20-configuration"></a>Настройка Azure CLI 2.0

Azure CLI 2.0 позволяет применять пользовательскую конфигурацию, чтобы переопределить внутренние параметры, такие как ведение журнала и сбор данных, а также предоставляет параметры по умолчанию для некоторых обязательных параметров. Для управления некоторыми из этих значений в CLI доступна удобная команда `az configure`. Другие значения можно задать в файле конфигурации или с помощью переменных среды.

Значения конфигурации, используемые CLI, будут вычисляются в следующем порядке: элементы, расположенные выше в списке, имеют больший приоритет.

1. Параметры командной строки
2. Переменные среды
3. Значения, содержащиеся в файле конфигурации или заданные с помощью команды `az configure`.

## <a name="cli-configuration-with-az-configure"></a>Настройка CLI с использованием команды az configure

Задать значения по умолчанию для CLI можно с помощью команды [az configure](/cli/azure/reference-index#az-configure).
Эта команда принимает один аргумент `--defaults`, который является разделенным пробелами списком пар `key=value`. Предоставленные значения используются в CLI вместо обязательных аргументов.

Ниже приведен список доступных параметров, которые можно использовать.

| ИМЯ | ОПИСАНИЕ |
|------|-------------|
| group | Группа ресурсов по умолчанию для всех команд. |
| location | Расположение по умолчанию для всех команд. |
| web | Имя приложения по умолчанию для команд `az webapp`. |
| vm | Имя виртуальной машины по умолчанию для команд `az vm`. |
| vmss | Имя VMSS по умолчанию для команд `az vmss`. |
| acr | Имя реестра контейнеров по умолчанию для `az acr` команд. |
| acs | Имя службы контейнеров по умолчанию для `az acs` команд. |

Вот пример того, как можно задать группу ресурсов и расположение по умолчанию для всех команд:

```azurecli
az configure --defaults location=westus2 group=MyResourceGroup
```

## <a name="cli-configuration-file"></a>Файл конфигурации CLI

Файл конфигурации CLI содержит другие параметры, которые используются для управления поведением CLI. Файл конфигурации расположен здесь: `$AZURE_CONFIG_DIR/config`. По умолчанию для `AZURE_CONFIG_DIR` устанавливается значение `$HOME/.azure` в Linux и macOS и `%USERPROFILE%\.azure` в Windows.

Файлы конфигурации записываются в формате INI. Эти файлы состоят из разделов, которые начинаются с заголовка `[section-name]` и списка записей `key=value`. Имена разделов зависят от регистра, а сами параметры — нет.
Комментарии — это любая строка, начинающаяся с `#` или `;`. Встроенные комментарии не допускаются. Логические операторы не зависят от регистра и представлены следующими значениями:

* __истина__: 1, yes, true, on;
* __ложь__: 0, no, false, off.

Ниже приведен пример файла конфигурации CLI, который отключает все запросы на подтверждение и настраивает для ведения журнала каталог `/var/log/azure`.

```
[core]
disable_confirm_prompt=Yes

[logging]
enable_log_file=yes
log_dir=/var/log/azure
```

Сведения обо всех доступных значениях параметров конфигурации и их описание см. в следующем разделе. Дополнительные сведения о формате INI см. в [документации Python по файлам INI](https://docs.python.org/3/library/configparser.html#supported-ini-file-structure).

## <a name="cli-configuration-values-and-environment-variables"></a>Переменные среды и значения конфигурации CLI

Следующая таблица содержит все разделы и имена параметров, которые могут быть включены в файл конфигурации. Соответствующие им переменные среды можно задать в качестве `AZURE_{section}_{name}` (прописными буквами). Например, вы можете задать значение `storage_account` для раздела `batchai` по умолчанию в переменной `AZURE_BATCHAI_STORAGE_ACCOUNT`.

Любое доступное значение, которое может быть значением по умолчанию, не всегда должно присутствовать в аргументах командной строки, даже если оно является обязательным.

| Раздел | ИМЯ      | type | ОПИСАНИЕ|
|---------|-----------|------|------------|
| __core__ | output | строка | Формат вывода по умолчанию. Может иметь значение `json`, `jsonc`, `tsv` или `table`. |
| | disable\_confirm\_prompt | Логическое | Включает и отключает запросы на подтверждение. |
| | collect\_telemetry | Логическое | Разрешает корпорации Майкрософт собирать анонимные данные об использовании CLI. Сведения о конфиденциальности см. в описании [условий использования Azure CLI 2.0](http://aka.ms/AzureCliLegal). |
| __logging__ | enable\_log\_file | Логическое | Включение и отключение ведения журнала. |
| | log\_dir | строка | Каталог для записи журналов. По умолчанию это `${AZURE_CONFIG_DIR}/logs`. |
| __storage__ | connection\_string | строка | Строка подключения по умолчанию для команд `az storage`. |
| | учетная запись | строка | Имя учетной записи по умолчанию для команд `az storage`. |
| | key | строка | Ключ учетной записи по умолчанию для команд `az storage`. |
| | sas\_token | строка | Токен SAS по умолчанию для команд `az storage`. |
| __batchai__ | storage\_account | строка | Учетная запись хранения по умолчанию для команд `az batchai`. |
| | storage\_key | строка | Ключ к хранилищу данных по умолчанию для команд `az batchai`. |
| __batch__ | учетная запись | строка | Учетная запись пакетной службы по умолчанию для команд `az batch`. |
| | access\_key | строка | Ключ доступа по умолчанию для команд `az batch`. Используется только с авторизацией `aad`. |
| | endpoint | строка | Конечная точка по умолчанию для подключения для команд `az batch`. |
| | auth\_mode | строка | Режим авторизации для команд `az batch`. Может иметь значение `shared_key` или `aad`. |

> [!NOTE]
> В файле конфигурации могут быть и другие значения, но управление ими осуществляется непосредственно с помощью команд CLI, включая `az configure`. Самостоятельно изменить можно только значения, перечисленные в таблице выше.
